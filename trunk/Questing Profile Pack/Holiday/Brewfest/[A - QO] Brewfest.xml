<HBProfile xsi:noNamespaceSchemaLocation="../../Schemas/QuestProfileSchema.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <!-- Profile by Chinajade (last updated for 2014 Brewfest)
      PROFILE EXPECTATIONS:
         * When using this profile, be certain to set the HonorBuddy bot to (select only one):
                ( ) Grinding / Mixed
                (*) Questing
                ( ) PvP
         * This profile is appropriate for (check all that apply):
                [X] Alliance   [ ] Achievement
                [ ] Horde      [ ] Farming
                               [ ] Leveling
                               [ ] PvP
                               [X] Questing
                               [ ] Reputation
                               [X] Seasonal
        NOTES:
         * Gets as many Brewfest quests and achievements done as possible given the
            existing HB-shipped behaviors.
         * We use variant timers between actions where appropriate to make it look
            more 'human like'.
         * There are a _lot_ of scenery decorations to get hung up on.  Unfortunately,
            the problem lies in HBcore's navigation, and blackspots will not help this.
            Be careful trying to do this unattended.  Getting hung up on a scenery
            decoration begs for attention in the Brewfest area with a lot of people around.
         * We include coordinates for all the seasonal NPCs as there is a very high chance
            they won't be in the user's Honorbuddy database.
        LICENSE:
            This work is licensed under the
                Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.
            also known as CC-BY-NC-SA.  To view a copy of this license, visit
                http://creativecommons.org/licenses/by-nc-sa/3.0/
            or send a letter to
                Creative Commons
                171 Second Street, Suite 300
                San Francisco, California, 94105, USA.
    -->
   <Name>Brewfest-Alliance ($Rev: 3709 $)</Name>

   <MinLevel>60</MinLevel>  <!-- 60, because we must fly in Classic -->
   <MaxLevel>1001</MaxLevel>

   <MinDurability>0.4</MinDurability>
   <MinFreeBagSlots>2</MinFreeBagSlots>

   <MailGrey>false</MailGrey>
   <MailWhite>false</MailWhite>
   <MailGreen>true</MailGreen>
   <MailBlue>true</MailBlue>
   <MailPurple>true</MailPurple>

   <SellGrey>true</SellGrey>
   <SellWhite>true</SellWhite>
   <SellGreen>false</SellGreen>
   <SellBlue>false</SellBlue>
   <SellPurple>false</SellPurple>


   <Blackspots>
       <Blackspot Name="Darnassas: Ramp otw to Auction House" X="9880.041" Y="2248.925" Z="1329.245" Radius="15" />
       <Blackspot Name="Exodar: Stairs to boat ramp" X="-4141.582" Y="-11457.56" Z="-130.7972" Radius="20" />
       <Blackspot Name="Ironforge: Side hill to Brewfest Food Court" X="-5216.624" Y="-603.6284" Z="407.5904" Radius="5.5" />
   </Blackspots>


   <QuestOrder>
       <If Condition="Me.IsHorde">
           <CustomBehavior File="LoadProfile" ProfileName="[H - QO] Brewfest" RememberProfile="true" />
       </If>

       <If Condition="!CanFly()" >
           <CustomBehavior File="UserDialog" StopOnContinue="true"
                           Text="Your toon must be able to fly in Kalimdor and Eastern Kingdoms to use this profile." />
       </If>

       <If Condition="Me.FreeNormalBagSlots &lt; 4" >
           <CustomBehavior File="UserDialog" StopOnContinue="true"
                           Text="You must have four free 'normal' bag slots to start this profile.\nPlease make some room in your inventory and restart the profile." />
       </If>

       <!-- WARN USER of HB bugs -->
       <If Condition="true" >      <!-- change to 'Condition="false"' to turn off warning -->
           <CustomBehavior File="UserDialog" AllowBotStop="true"
                           Text="Do NOT AFK this profile!\n\n* You should turn off any plugins or Combat Routine features that use Slowfall abilities. Otherwise, the &quot;Almost Blind Luck&quot; achievement will be acquired after you run out of Slowfall reagents (we keep trying until we get the achievement).\n\n* It goes into areas with many, many people around. You should keep an eye on profile progression.\n\n* Honorbuddy navigation _loves_ to get stuck.\nThe Brewfest scenery decorations provide a wealth of opportunities for this.\n\n* Moving around while drunk causes you to fall a lot (and sometimes die), since Honorbuddy loves to path on the bloody edge of a dropoff. Honorbuddy navigation leaves no room for the error induced by drunkeness.\n\n* Honorbuddy occasionally has problems with Intercontinental travel, which is needed for one of the quests.\n\n* Honorbuddy occasionally gets confused about 'quest state'.\nIt will think something is incomplete when its done.  We've made the profile very stop/start friendly to work around this.\n\n* To turn this warning message off, edit the profile.  Look for a comment with the words &quot;WARN USER&quot; and change the 'true' to 'false'." />
       </If>

       <CustomBehavior File="UserSettings" Preset="NoDistractions" />

       <!-- Quest: Now this is Racing... Almost! -->
       <!-- Need to do this before we get drunk, otherwise it can fail -->
       <If Condition="new uint[]{11318,11122}.Any(questId =&gt; HasQuest(questId) || !IsQuestCompleted(questId))">
           <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
           <CustomBehavior File="FlyTo" DestName="Ram racing area" Land="true"
                           X="-5208.785" Y="-494.4889" Z="388.4344" AllowedVariance="7" />
           <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                           GoalText="Loitering for {TimeRemaining}" />

           <PickUp QuestName="Now this is Racing... Almost!" QuestId="11318"
                   GiverName="Neill Ramstein" GiverId="23558"
                   Nav="Fly" X="-5200.16" Y="-491.55" Z="388.48" />

           <CustomBehavior File="SpecificQuests\Holiday\Brewfest-RamRidingQuests" QuestId="11318" >
               <RidingPath>
                   <!-- We micro-manage the path to work around some navigator quirks... -->
                   <Hotspot Name="Torch avoidance" X="-5211.265" Y="-483.2207" Z="389.1165" />
                   <Hotspot Name="Banner to road" X="-5229.856" Y="-478.0888" Z="386.3706" />
                   <Hotspot Name="Riverbed 1" X="-5309.548" Y="-522.5736" Z="388.3328" />
                   <Hotspot Name="Apple Bucket 1" X="-5357.132" Y="-536.7656" Z="391.7714" />
                   <Hotspot Name="Apple Bucket 1 (top of fence)" X="-5359.22" Y="-536.167" Z="392.7879" />
                   <Hotspot Name="Apple Bucket 1 (other side of fence)" X="-5363.143" Y="-535.0867" Z="392.7849" />
                   <Hotspot Name="Beside tree near Apple Bucket2" X="-5460.032" Y="-540.7568" Z="398.394" />
                   <Hotspot Name="Apple Bucket 2" X="-5492.018" Y="-534.7864" Z="398.1151" />
                   <Hotspot Name="Tents by Inn" X="-5547.676" Y="-506.3896" Z="402.0213" />
                   <Hotspot Name="Kegs by Flynn Firebrew" X="-5599.494" Y="-469.1557" Z="398.0992" />
                   <Hotspot Name="Turning around for return" X="-5592.111" Y="-470.8087" Z="398.4724" />

                   <Hotspot Name="Road by tents" X="-5528.97" Y="-486.5582" Z="397.5043" />
                   <Hotspot Name="Apple Bucket 2" X="-5492.018" Y="-534.7864" Z="398.1151" />
                   <Hotspot Name="Beside tree near Apple Bucket2" X="-5460.032" Y="-540.7568" Z="398.394" />
                   <Hotspot Name="Apple Bucket 1 (other side of fence)" X="-5363.143" Y="-535.0867" Z="392.7849" />
                   <Hotspot Name="Apple Bucket 1 (top of fence)" X="-5359.22" Y="-536.167" Z="392.7879" />
                   <Hotspot Name="Apple Bucket 1" X="-5357.132" Y="-536.7656" Z="391.7714" />
                   <Hotspot Name="Riverbed 1" X="-5309.548" Y="-522.5736" Z="388.3328" />
                   <Hotspot Name="Brew drop-off location" X="-5203.017" Y="-496.6536" Z="388.3303" />
               </RidingPath>
           </CustomBehavior>

           <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
           <CustomBehavior File="FlyTo" QuestId="11318" DestName="Ram racing area" Land="true"
                           X="-5208.785" Y="-494.4889" Z="388.4344" AllowedVariance="7" />
           <CustomBehavior File="WaitTimer" QuestId="11318" WaitTime="3000" VariantTime="5000"
                           GoalText="Loitering for {TimeRemaining}" />

           <TurnIn QuestName="Now this is Racing... Almost!" QuestId="11318"
                   TurnInName="Neill Ramstein" TurnInId="23558"
                   Nav="Fly" X="-5200.16" Y="-491.55" Z="388.48" />

           <!-- Quest: There and Back again -->
           <PickUp QuestName="There And Back Again" QuestId="11122"
                   GiverName="Neill Ramstein" GiverId="23558"
                   Nav="Fly" X="-5200.16" Y="-491.55" Z="388.48" />

           <CustomBehavior File="SpecificQuests\Holiday\Brewfest-RamRidingQuests" QuestId="11122" >
               <RidingPath>
                   <!-- We micro-manage the path to work around some navigator quirks... -->
                   <Hotspot Name="Torch avoidance" X="-5211.265" Y="-483.2207" Z="389.1165" />
                   <Hotspot Name="Banner to road" X="-5229.856" Y="-478.0888" Z="386.3706" />
                   <Hotspot Name="Riverbed 1" X="-5309.548" Y="-522.5736" Z="388.3328" />
                   <Hotspot Name="Apple Bucket 1" X="-5357.132" Y="-536.7656" Z="391.7714" />
                   <Hotspot Name="Apple Bucket 1 (top of fence)" X="-5359.22" Y="-536.167" Z="392.7879" />
                   <Hotspot Name="Apple Bucket 1 (other side of fence)" X="-5363.143" Y="-535.0867" Z="392.7849" />
                   <Hotspot Name="Beside tree near Apple Bucket2" X="-5460.032" Y="-540.7568" Z="398.394" />
                   <Hotspot Name="Apple Bucket 2" X="-5492.018" Y="-534.7864" Z="398.1151" />
                   <Hotspot Name="Tents by Inn" X="-5547.676" Y="-506.3896" Z="402.0213" />
                   <Hotspot Name="Kegs by Flynn Firebrew" X="-5599.494" Y="-469.1557" Z="398.0992" />
                   <Hotspot Name="Turning around for return" X="-5592.111" Y="-470.8087" Z="398.4724" />

                   <Hotspot Name="Road by tents" X="-5528.97" Y="-486.5582" Z="397.5043" />
                   <Hotspot Name="Apple Bucket 2" X="-5492.018" Y="-534.7864" Z="398.1151" />
                   <Hotspot Name="Beside tree near Apple Bucket2" X="-5460.032" Y="-540.7568" Z="398.394" />
                   <Hotspot Name="Apple Bucket 1 (other side of fence)" X="-5363.143" Y="-535.0867" Z="392.7849" />
                   <Hotspot Name="Apple Bucket 1 (top of fence)" X="-5359.22" Y="-536.167" Z="392.7879" />
                   <Hotspot Name="Apple Bucket 1" X="-5357.132" Y="-536.7656" Z="391.7714" />
                   <Hotspot Name="Riverbed 1" X="-5309.548" Y="-522.5736" Z="388.3328" />
                   <Hotspot Name="Brew drop-off location" X="-5203.017" Y="-496.6536" Z="388.3303" />
               </RidingPath>
           </CustomBehavior>

           <TurnIn QuestName="There and Back Again" QuestId="11122"
                   TurnInName="Neill Ramstein" TurnInId="23558"
                   Nav="Fly" X="-5200.16" Y="-491.55" Z="388.48" />
       </If>


       <!-- A New Supplier of Souvenirs -->
       <If Condition="HasQuest(29397) || !IsQuestCompleted(29397)">
           <PickUp QuestName="A New Supplier of Souvenirs" QuestId="29397"
                   GiverName="Pol Amberstill" GiverId="24468"
                   Nav="Fly" X="-5200.87" Y="-484.70" Z="388.80" />

           <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
           <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                           X="-5157.048" Y="-600.1396" Z="398.1775" AllowedVariance="15" />
           <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                           GoalText="Loitering for {TimeRemaining}" />

           <TurnIn QuestName="A New Supplier of Souvenirs" QuestId="29397"
                   TurnInName="Belbi Quikswitch" TurnInId="23710"
                   Nav="Fly" X="-5176.91" Y="-624.37" Z="397.86" />
       </If>


       <!--
           ========== Achievements & non-Daily quests ==========
           NB: We wrap each sub-achievement in a <While>, since we can get interrupted
           during the Dark Iron Invasion event
       -->
       <!-- NB: IsAchievementCompleted(id) is broken if another toon on the account has already
            acquired the achievement.  We use this LUA hack to get the correct information.
            The bug has been reported as HB-1219.
            The same problem does not exist for the IsAchievementCompleted(id, index) form.
       -->

       <!-- Achievements: Strange Brew & The Brewfest Diet -->
       <If Condition="Me.ZoneId == 1" >

           <If Condition="new int[]{4,5,6}.Any(i =&gt; !IsAchievementCompleted(1184,i)) || new int[]{1,2,3,5,6,8}.Any(i =&gt; !IsAchievementCompleted(1185,1))">
               <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
               <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                               X="-5157.048" Y="-600.1396" Z="398.1775" AllowedVariance="15" />
               <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                               GoalText="Loitering for {TimeRemaining}" />

               <!-- Achievement: Strange Brew(Gordok) - Gordok Grog -->
               <While Condition="!IsAchievementCompleted(1184,4)" >
                   <If Condition="!HasItem(33034)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Gordok Brew Apprentice" X="-5141.064" Y="-582.6545" Z="397.1776" />
                       <CustomBehavior File="InteractWith" MobId="23511" InteractByBuyingItemId="33034" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33034" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: Strange Brew(Gordok) - Mudder's Milk -->
               <While Condition="!IsAchievementCompleted(1184,5)" >
                   <If Condition="!HasItem(33036)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Gordok Brew Apprentice" X="-5141.064" Y="-582.6545" Z="397.1776" />
                       <CustomBehavior File="InteractWith" MobId="23511" InteractByBuyingItemId="33036" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33036" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: Strange Brew(Gordok) - Ogre Mead -->
               <While Condition="!IsAchievementCompleted(1184,6)" >
                   <If Condition="!HasItem(33035)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Gordok Brew Apprentice" X="-5141.064" Y="-582.6545" Z="397.1776" />
                       <CustomBehavior File="InteractWith" MobId="23511" InteractByBuyingItemId="33035" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33035" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: The Brewfest Diet - Dried Sausage -->
               <While Condition="!IsAchievementCompleted(1185,1)" >
                   <If Condition="!HasItem(34063)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Keiran Donoghue" X="-5133.269" Y="-605.2112" Z="397.4294" />
                       <CustomBehavior File="InteractWith" MobId="23481" InteractByBuyingItemId="34063"
                                       X="-5133.409" Y="-605.9552" Z="397.4519" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="34063" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: The Brewfest Diet - Pickled Sausage -->
               <While Condition="!IsAchievementCompleted(1185,2)" >
                   <If Condition="!HasItem(33024)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Keiran Donoghue" X="-5133.269" Y="-605.2112" Z="397.4294" />
                       <CustomBehavior File="InteractWith" MobId="23481" InteractByBuyingItemId="33024" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33024" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: The Brewfest Diet - Savory Sausage -->
               <While Condition="!IsAchievementCompleted(1185,3)" >
                   <If Condition="!HasItem(33023)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Keiran Donoghue" X="-5133.269" Y="-605.2112" Z="397.4294" />
                       <CustomBehavior File="InteractWith" MobId="23481" InteractByBuyingItemId="33023" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33023" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: The Brewfest Diet - Spicy Smoked Sausage -->
               <While Condition="!IsAchievementCompleted(1185,5)" >
                   <If Condition="!HasItem(33025)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Keiran Donoghue" X="-5133.269" Y="-605.2112" Z="397.4294" />
                       <CustomBehavior File="InteractWith" MobId="23481" InteractByBuyingItemId="33025" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33025" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: The Brewfest Diet - Succulent Sausage -->
               <While Condition="!IsAchievementCompleted(1185,6)" >
                   <If Condition="!HasItem(34064)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Keiran Donoghue" X="-5133.269" Y="-605.2112" Z="397.4294" />
                       <CustomBehavior File="InteractWith" MobId="23481" InteractByBuyingItemId="34064" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="34064" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: The Brewfest Diet - The Golden Link -->
               <While Condition="!IsAchievementCompleted(1185,8)" >
                   <If Condition="!HasItem(33026)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Keiran Donoghue" X="-5133.269" Y="-605.2112" Z="397.4294" />
                       <CustomBehavior File="InteractWith" MobId="23481" InteractByBuyingItemId="33026" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33026" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>
           </If>

           <If Condition="new int[]{7,8,9}.Any(i =&gt; !IsAchievementCompleted(1184,i))">
               <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
               <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                               X="-5157.048" Y="-600.1396" Z="398.1775" AllowedVariance="15" />
               <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                               GoalText="Loitering for {TimeRemaining}" />

               <!-- Achievement: Strange Brew(Thunderbrew) - Thunder 45 -->
               <While Condition="!IsAchievementCompleted(1184,7)" >
                   <If Condition="!HasItem(33031)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Thunderbrew Apprentice" X="-5149.848" Y="-630.2669" Z="397.2568" />                                   <CustomBehavior File="InteractWith" MobId="23510" InteractByBuyingItemId="33031" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33031" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: Strange Brew(Thunderbrew) - Thunderbrew Ale -->
               <While Condition="!IsAchievementCompleted(1184,8)" >
                   <If Condition="!HasItem(33032)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Thunderbrew Apprentice" X="-5149.848" Y="-630.2669" Z="397.2568" />                                   <CustomBehavior File="InteractWith" MobId="23510" InteractByBuyingItemId="33031" />
                       <CustomBehavior File="InteractWith" MobId="23510" InteractByBuyingItemId="33032" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33032" />
                   <CustomBehavior File="WaitTimer" WaitTime="100" VariantTime="700" />
               </While>

               <!-- Achievement: Strange Brew(Thunderbrew) - Thunderbrew Stout -->
               <While Condition="!IsAchievementCompleted(1184,9)" >
                   <If Condition="!HasItem(33033)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Thunderbrew Apprentice" X="-5149.848" Y="-630.2669" Z="397.2568" />                                   <CustomBehavior File="InteractWith" MobId="23510" InteractByBuyingItemId="33031" />
                       <CustomBehavior File="InteractWith" MobId="23510" InteractByBuyingItemId="33033" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33033" />
                   <CustomBehavior File="WaitTimer" WaitTime="100" VariantTime="700" />
               </While>
           </If>

           <!-- Achievement: The Brewfest Diet - Spiced Onion Cheese -->
           <While Condition="!IsAchievementCompleted(1185,4)" >
               <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
               <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                               X="-5157.048" Y="-600.1396" Z="398.1775" AllowedVariance="15" />
               <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                               GoalText="Loitering for {TimeRemaining}" />

               <If Condition="!HasItem(34065)">
                   <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                   <MoveTo DestName="Anne Summers" X="-5170.659" Y="-625.4578" Z="397.1766" />
                   <CustomBehavior File="InteractWith" MobId="23521" InteractByBuyingItemId="34065" />
                   <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
               </If>
               <CustomBehavior File="UseItem" ItemId="34065" />
               <CustomBehavior File="WaitTimer" WaitTime="100" VariantTime="700" />
           </While>

           <If Condition="new int[]{1,2,3}.Any(i =&gt; !IsAchievementCompleted(1184,i))">
               <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
               <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                               X="-5157.048" Y="-600.1396" Z="398.1775" AllowedVariance="15" />
               <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                               GoalText="Loitering for {TimeRemaining}" />
               <!-- Achievement: Strange Brew(Barleybrew) - Barleybrew Clear -->
               <While Condition="!IsAchievementCompleted(1184,1)" >
                   <If Condition="!HasItem(33030)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Barleybrew Apprentice" X="-5181.421" Y="-607.0918" Z="397.1771" />
                       <CustomBehavior File="InteractWith" MobId="23482" InteractByBuyingItemId="33030" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33030" />
                   <CustomBehavior File="WaitTimer" WaitTime="100" VariantTime="700" />

               </While>

               <!-- Achievement: Strange Brew(Barleybrew) - Barleybrew Dark -->
               <While Condition="!IsAchievementCompleted(1184,2)" >
                   <If Condition="!HasItem(33029)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Barleybrew Apprentice" X="-5181.421" Y="-607.0918" Z="397.1771" />
                       <CustomBehavior File="InteractWith" MobId="23482" InteractByBuyingItemId="33029" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33029" />
                   <CustomBehavior File="WaitTimer" WaitTime="100" VariantTime="700" />
               </While>

               <!-- Achievement: Strange Brew(Barleybrew) - Barleybrew Light -->
               <While Condition="!IsAchievementCompleted(1184,3)" >
                   <If Condition="!HasItem(33028)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Barleybrew Apprentice" X="-5181.421" Y="-607.0918" Z="397.1771" />
                       <CustomBehavior File="InteractWith" MobId="23482" InteractByBuyingItemId="33028" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33028" />
                   <CustomBehavior File="WaitTimer" WaitTime="100" VariantTime="700" />
               </While>
           </If>

           <!-- Achievement: The Brewfest Diet - The Essential Brewfest Pretzel -->
           <While Condition="!IsAchievementCompleted(1185,7)" >
               <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
               <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                               X="-5157.048" Y="-600.1396" Z="398.1775" AllowedVariance="15" />
               <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                               GoalText="Loitering for {TimeRemaining}" />

               <If Condition="!HasItem(33043)">
                   <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                   <MoveTo DestName="Arlen Lochlen" X="-5182.268" Y="-584.1409" Z="397.6835" />
                   <CustomBehavior File="InteractWith" MobId="23522" InteractByBuyingItemId="33043" />
                   <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
               </If>
               <CustomBehavior File="UseItem" ItemId="33043" />
               <CustomBehavior File="WaitTimer" WaitTime="100" VariantTime="700" />
           </While>
       </If>


       <!--
           Pick up whatever quests are not complete
       -->

       <!-- Welcome to Brewfest! -->
       <If Condition="!IsQuestCompleted(11442)" >
           <!-- Non-standard quest... it completes when we pick it up.
                As such, we have to do things manually rather than use the normal <PickUp>
           -->
           <CustomBehavior File="InteractWith" MobId="24710" X="-5184.68" Y="-562.37" Z="397.18" />
           <CustomBehavior File="Misc\RunLua" Lua="SelectGossipAvailableQuest(1)" />
           <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="900" />
           <CustomBehavior File="Misc\RunLua" Lua="GetQuestReward(1)" />
       </If>

       <!-- Get Synthebrew Goggles from Goldark Sniphunter, and equip them... -->
       <If Condition="!HasItem(46735)">
           <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
           <CustomBehavior File="FlyTo" DestName="Goldark Snipehunter" Land="true"
                           X="-5173.357" Y="-575.2989" Z="397.2881" AllowedVariance="3" />

           <CustomBehavior File="InteractWith" MobId="23486" InteractByGossipOptions="1,1"
                           TerminateWhen="HasItem(46735)" />
       </If>

       <!-- Quest: Catch the Wild Wolpertinger -->
       <If Condition="!IsQuestCompleted(11117)" >
           <PickUp QuestName="Catch the Wild Wolpertinger" QuestId="11117"
                   GiverName="Goldark Snipehunter" GiverId="23486"
                   Nav="Fly" X="-5172.92" Y="-562.57" Z="397.18" />

           <CustomBehavior File="FlyTo" DestName="Wolpertinger hunting grounds"
                           X="-5246.598" Y="-466.2682" Z="388.1418"
                           AllowedVariance="25" />

           <CustomBehavior File="UserSettings" AutoEquip="false" />
           <CustomBehavior File="EquipItem" ItemId="46735" />
           <CustomBehavior File="InteractWith" InteractByUsingItemId="32907" MobId="23487" Range="15"
                           MovementBy="NavigatorPreferred" NumOfTimes="100"
                           X="-5184.68" Y="-562.37" Z="397.18"
                           TerminateWhen="GetItemCount(32906) &gt;= 5"/>
           <CustomBehavior File="UserSettings" AutoEquip="original" />

           <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
           <CustomBehavior File="FlyTo" DestName="Goldark Snipehunter" Land="true"
                           X="-5173.357" Y="-575.2989" Z="397.2881" AllowedVariance="3" />

           <TurnIn QuestName="Catch the Wild Wolpertinger" QuestId="11117"
                   TurnInName="Goldark Snipehunter" TurnInId="23486"
                   Nav="Fly" X="-5172.92" Y="-562.57" Z="397.18" />

           <!-- Learn the minipet spell -->
           <CustomBehavior File="UseItem" ItemId="32233" />
       </If>

       <!-- Achievement: Almost Blind Luck -->
       <!-- NB: IsAchievementCompleted(id) is broken if another toon on the account has already
            acquired the achievement.  We use this LUA hack to get the correct information.
            The bug has been reported as HB-1219.
            The same problem does not exist for the IsAchievementCompleted(id, index) form.
       -->
       <If Condition="( Me.ZoneId == 1 ) &amp;&amp; !Lua.GetReturnVal&lt;bool&gt;(&quot;return GetAchievementInfo(1260)&quot;, 12)">
           <CustomBehavior File="Message" UpdateGoalText="true" LogColor="CornflowerBlue"
                           Text="Working the &quot;Almost Blind Luck&quot; achievement." />

           <CustomBehavior File="FlyTo" DestName="area for &quot;Almost Blind Luck&quot; achievement"
                           X="-5161.173" Y="-871.1495" Z="575" AllowedVariance="5" />
           <CustomBehavior File="UserSettings" AutoEquip="false" />
           <CustomBehavior File="EquipItem" ItemId="46735" />

           <CustomBehavior File="UserDialog" ExpiryTime="30"
                           Text="You must TURN OFF any plugins that use SLOWFALL abilities...\n\nOtherwise, the achievement will be deferred until you run out of appropriate slowfall reagents.\n\n(This message will self-dismiss in a few seconds.)" />
           <!-- Can't used "ForcedDismount" because we don't want automatic descent -->
           <CustomBehavior File="Misc\RunLua" Lua="Dismount()" />
           <!-- In case we're Druid... -->
           <CustomBehavior File="Misc\RunLua" Lua="CancelShapeshiftForm()" />

           <CustomBehavior File="WaitTimer" WaitTime="5000" VariantTime="2000" />
           <If Condition="!Lua.GetReturnVal&lt;bool&gt;(&quot;return GetAchievementInfo(1260)&quot;, 12)">
               <CustomBehavior File="UserDialog" ExpiryTime="30"
                               Text="We were FAILED TO GET the &quot;Almost Blind Luck&quot; ACHIEVEMENT.\n\nThis can happen for numerous reasons.  Your options are:\n* Stop the profile, and do the achievement manually, or\n* Let the profile automatically try again in a few seconds" />
           </If>
           <CustomBehavior File="UserSettings" AutoEquip="original" />
       </If>

       <!-- Quest: Chug and Chuck! -->
       <If Condition="HasQuest(12022) || !IsQuestCompleted(12022)" >
           <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
           <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center near entrance" Land="true"
                           X="-5193.379" Y="-547.4433" Z="397.1737" AllowedVariance="5" />

           <PickUp QuestName="Chug and Chuck!" QuestId="12022"
                   GiverName="Boxey Boltspinner" GiverId="27215"
                   Nav="Fly" X="-5185.34" Y="-540.17" Z="397.12" />

           <CustomBehavior File="ForcedDismount" />

           <While Condition="!IsQuestCompleted(12022)" >
               <MoveTo X="-5180.94" Y="-543.478" Z="397.1476" />

               <CustomBehavior File="InteractWith" MobId="186189" NonCompeteDistance="0"
                               TerminateWhen="HasItem(33096)" />
               <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="900" />

               <CustomBehavior File="InteractWith" InteractByUsingItemId="33096" MobId="24108" Range="20"
                               NonCompeteDistance="0" />
           </While>

           <TurnIn QuestName="Chug and Chuck!" QuestId="12022"
                   TurnInName="Boxey Boltspinner" TurnInId="27215"
                   Nav="Fly" X="-5185.34" Y="-540.17" Z="397.12" />
       </If>


       <!-- Quest: This One Time, When I Was Drunk... -->
       <!-- We can't pick this one up, because it requires a large team effort
            to do.  But, if the user has done this successfully, go turn it in
            for them.
       -->
       <If Condition="HasQuest(12020)" >
           <TurnIn QuestName="This One Time, When I Was Drunk..." QuestId="12020"
                   TurnInName="Boxey Boltspinner" TurnInId="27215"
                   Nav="Fly" X="-5185.34" Y="-540.17" Z="397.12" />
       </If>


       <!-- Achievement: Have Keg, Will Travel -->
       <!-- NB: IsAchievementCompleted(id) is broken if another toon on the account has already
            acquired the achievement.  We use this LUA hack to get the correct information.
            The bug has been reported as HB-1219.
            The same problem does not exist for the IsAchievementCompleted(id, index) form.
       -->
       <If Condition="!Lua.GetReturnVal&lt;bool&gt;(&quot;return GetAchievementInfo(303)&quot;, 12)" >
           <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
           <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                           X="-5157.048" Y="-600.1396" Z="398.1775" AllowedVariance="15" />

           <If Condition="HasItem(39476)" >    <!-- Fresh Goblin Brewfest Hops -->
               <CustomBehavior File="ForcedDismount" />
               <CustomBehavior File="ForcedMount" MountType="Ground" />
               <CustomBehavior File="UseItem" ItemId="39476" />
               <ElseIf Condition="HasItem(39477)" >    <!-- Fresh Dwarven Brewfest Hops -->
                   <CustomBehavior File="ForcedDismount" />
                   <CustomBehavior File="ForcedMount" MountType="Ground" />
                   <CustomBehavior File="UseItem" ItemId="39477" />
               </ElseIf>
               <ElseIf Condition="HasItem(37750)" > <!-- Fresh Brewfest Hops -->
                   <CustomBehavior File="ForcedDismount" />
                   <CustomBehavior File="ForcedMount" MountType="Ground" />
                   <CustomBehavior File="UseItem" ItemId="37750" />
               </ElseIf>
               <ElseIf Condition="HasItem(37816)" > <!-- Preserved Brewfest Hops -->
                   <CustomBehavior File="ForcedDismount" />
                   <CustomBehavior File="ForcedMount" MountType="Ground" />
                   <CustomBehavior File="UseItem" ItemId="37816" />
               </ElseIf>
               <ElseIf Condition="GetItemCount(37829) &gt;= 2"> <!-- Brewfest Prize Tokens -->
                   <CustomBehavior File="FlyTo" DestName="Belbi Quikswitch" Land="true"
                                   X="-5174.243" Y="-622.463" Z="397.1766" />
                   <CustomBehavior File="ForcedDismount" />
                   <!-- Due to an HBcore bug, we have to buy the hard way...
                        This may happen because the questgiver has gossip dialogs also.
                   -->
                   <CustomBehavior File="InteractWith" MobId="23710" InteractByGossipOptions="4"
                                   InteractByBuyingItemId="37750" KeepTargetSelected="true" />
                   <CustomBehavior File="Misc\RunLua" Lua="CloseMerchant()" />
                   <CustomBehavior File="ForcedMount" MountType="Ground" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
                   <CustomBehavior File="UseItem" ItemId="37750" />
               </ElseIf>
               <Else>
                   <CustomBehavior File="UserDialog"
                                   Text="You do not have the &quot;Have Keg, Will Travel&quot; achievement.\n\nYou also don't have enough Brewfest Prize Tokens to claim the achievement.  For now we'll have to skip it, and we'll try again when you restart the profile.  Hopefully, by then you will have additional Brewfest Prize Tokens from doing Brewfest dailies." />
               </Else>
           </If>
       </If>


       <!-- Quest: Pink Elekks on Parade -->
       <If Condition="!IsQuestCompleted(11118)" >
           <If Condition="!HasQuest(11118)" >
               <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
               <CustomBehavior File="FlyTo" DestName="Goldark Snipehunter" Land="true"
                               X="-5173.357" Y="-575.2989" Z="397.2881" AllowedVariance="3" />

               <PickUp QuestName="Pink Elekks on Parade" QuestId="11118"
                       GiverName="Goldark Snipehunter" GiverId="23486"
                       Nav="Fly" X="-5172.92" Y="-562.57" Z="397.18" />
           </If>

           <!-- If Elwynn Elekks are needed... -->
           <If Condition="!IsObjectiveComplete(2,11118)">
               <CustomBehavior File="Message" UpdateGoalText="true" LogColor="CornflowerBlue"
                               Text="Working the Elwynn Forest Elekks." />

               <If Condition="Me.MapId == 0" >
                   <CustomBehavior File="FlyTo" DestName="Elwynn Forest Elekks"
                                   X="-9125.615" Y="341.6986" Z="94.1765" AllowedVariance="10" />
                   <CustomBehavior File="ForcedDismount" />
                   <Else>
                       <CustomBehavior File="UserDialog" StopOnContinue="true"
                                       Text="Whoops, you're not where we left you.\n\nPlease move to Eastern Kingdoms and start the profile again." />
                   </Else>
               </If>

               <CustomBehavior File="UserSettings" AutoEquip="false" />
               <CustomBehavior File="EquipItem" ItemId="46735" />
               <CustomBehavior File="InteractWith" QuestId="11118" QuestObjectiveIndex="2"
                               NumOfTimes="100" InteractByUsingItemId="32960" Range="15"
                               MobId="23528" MobId2="23507" MobId3="23527"
                               MobId4="23529" MobId5="23530" MobId6="23531"
                               PreInteractMountStrategy="Dismount" />
               <CustomBehavior File="UserSettings" AutoEquip="original" />
           </If>

           <!-- If Teldrassil Elekks are needed... -->
           <If Condition="!IsObjectiveComplete(3,11118)">
               <CustomBehavior File="Message" UpdateGoalText="true" LogColor="CornflowerBlue"
                               Text="Working the Teldrassil Forest Elekks." />

               <!-- Move to Darnassas via Stormwind Harbor, if in Eastern Kingdoms -->
               <If Condition="Me.MapId == 0" >
                   <CustomBehavior File="FlyTo" DestName="Stormwind Docks"
                                   X="-8629.695" Y="1298.055" Z="5.536788" AllowedVariance="5" />
                   <CustomBehavior File="ForcedDismount" />
                   <CustomBehavior File="UseTransport"
                                   TransportId="176310"
                                   WaitAtX="-8641.42" WaitAtY="1325.966" WaitAtZ="5.23437"
                                   TransportStartX="-8650.719" TransportStartY="1346.051" TransportStartZ="-0.04151175"
                                   StandOnX="-8645.277" StandOnY="1339.042" StandOnZ="6.114784"
                                   TransportEndX="8162.587" TransportEndY="1005.365" TransportEndZ="0.04256689"
                                   GetOffX="8178.701" GetOffY="1003.521" GetOffZ="6.73991" />
               </If>

               <!-- If we're in Kalimdor, but not in Darnassas, fly to Rut'theran Village -->
               <If Condition="( Me.MapId == 1 ) &amp;&amp; ( Me.ZoneId != 1657 )" >
                   <!-- We have to use MyCTM flying...
                        The Rut'theran portal doesn't work with GoThruPortal.
                        Flightor (e.g., FlyTo) has problems because we're on the edge of the map.
                   -->
                   <CustomBehavior File="FlyTo" DestName="Rut'theran boat dock"
                                   X="8204.621" Y="1021.708" Z="31.24551" />
                   <CustomBehavior File="MyCTM" DestName="Teldrassil Brewfest"
                                   X="8772.303" Y="1266.408" Z="1042.673" />
                   <CustomBehavior File="MyCTM" DestName="Teldrassil Brewfest"
                                   X="8978.512" Y="1541.677" Z="1557.47" />
                   <CustomBehavior File="MyCTM" DestName="Teldrassil Brewfest"
                                   X="9383.797" Y="1989.709" Z="1641.068" />
                   <CustomBehavior File="MyCTM" DestName="Teldrassil Brewfest"
                                   X="9675.931" Y="2343.2" Z="1692.526" />
                   <CustomBehavior File="MyCTM" DestName="Teldrassil Brewfest"
                                   X="9888.579" Y="2224.697" Z="1390.295" />
               </If>

               <If Condition="Me.ZoneId != 1657">
                   <CustomBehavior File="UserDialog" StopOnContinue="true"
                                   Text="Whoops, you're not where we left you.\n\nPlease move to Darnassas and start the profile again." />
               </If>

               <CustomBehavior File="FlyTo" DestName="Teldrassil Brewfest"
                               X="9973.107" Y="2205.384" Z="1329.092" ArrivalTolerance="10" />
               <CustomBehavior File="ForcedDismount" />

               <CustomBehavior File="UserSettings" AutoEquip="false" />
               <CustomBehavior File="EquipItem" ItemId="46735" />
               <CustomBehavior File="InteractWith" QuestId="11118" QuestObjectiveIndex="3"
                               NumOfTimes="100" InteractByUsingItemId="32960" Range="15"
                               MobId="23528" MobId2="23507" MobId3="23527"
                               MobId4="23529" MobId5="23530" MobId6="23531"
                               PreInteractMountStrategy="Dismount" />
               <CustomBehavior File="UserSettings" AutoEquip="original" />
           </If>

           <!-- If Azuremyst Elekks are needed... -->
           <If Condition="!IsObjectiveComplete(1,11118)">

               <!-- If in Darnasses, use Exodar portal... -->
               <If Condition="Me.ZoneId == 1657">
                   <!-- Flying has serious problems in Darnasses, we'll just run there.., -->
                   <MoveTo Nav="Fly" DestName="Exodar Portal" X="9658.931" Y="2508.835" Z="1331.616" />
                   <CustomBehavior File="InteractWith" MobId="207995" WaitTime="7000" />
               </If>

               <!-- If in Exodar, move outside -->
               <If Condition="Me.ZoneId != 3557" >
                   <CustomBehavior File="UserDialog" StopOnContinue="true"
                                   Text="Whoops, you're not where we left you.\n\nPlease move to The Exodar and start the profile again." />
               </If>

               <MoveTo DestName="Azuremyst Brewfest" X="-3986.956" Y="-11874.19" Z="0.3620152" />
               <CustomBehavior File="ForcedDismount" />

               <CustomBehavior File="UserSettings" AutoEquip="false" />
               <CustomBehavior File="EquipItem" ItemId="46735" />
               <CustomBehavior File="InteractWith" QuestId="11118" QuestObjectiveIndex="1"
                               NumOfTimes="100" InteractByUsingItemId="32960" Range="15"
                               MobId="23528" MobId2="23507" MobId3="23527"
                               MobId4="23529" MobId5="23530" MobId6="23531"
                               PreInteractMountStrategy="Dismount" />
               <CustomBehavior File="UserSettings" AutoEquip="original" />
           </If>
       </If>

       <If Condition="HasQuest(11118)">
           <CustomBehavior File="Message" UpdateGoalText="true" LogColor="CornflowerBlue"
                           Text="Turning in &quot;Pink Elekks on Parade&quot; quest." />

           <!-- If in Exodar/Azuremyst, move to Blasted Lands Portal -->
           <If Condition="Me.ZoneId == 3557" >
               <MoveTo DestName="Blasted Lands Portal" X="-4045.275" Y="-11575.06" Z="-138.4861" />
               <CustomBehavior File="InteractWith" MobId="195141" />
               <CustomBehavior File="WaitTimer" WaitTime="4000" VariantTime="3000" />
           </If>


           <!-- If in Darnassas, move to Blasted Lands Portal -->
           <If Condition="Me.ZoneId == 1657" >
               <!-- Flying has serious problems in Darnasses, we'll just run there.., -->
               <MoveTo Nav="Fly" DestName="Blasted Lands Portal" X="9658.931" Y="2508.835" Z="1331.616" />
               <CustomBehavior File="InteractWith" MobId="195141" WaitTime="7000" />
               <CustomBehavior File="WaitTimer" WaitTime="5000" VariantTime="3000" />
           </If>


           <!-- If in EK, move to final destination -->
           <If Condition="Me.MapId == 0" >
               <CustomBehavior File="FlyTo" DestName="Goldark Snipehunter"
                               X="-5172.92" Y="-562.57" Z="397.18" />
               <CustomBehavior File="ForcedDismount" />
           <Else>
               <CustomBehavior File="UserDialog" StopOnContinue="true"
                               Text="Whoops, you're not where we left you.\n\nPlease move to Eastern Kingdoms and start the profile again." />
               </Else>
           </If>

           <TurnIn QuestName="A New Supplier of Souvenirs" QuestId="11118"
                   TurnInName="Goldark Snipehunter" TurnInId="23486"
                   Nav="Fly" X="-5172.92" Y="-562.57" Z="397.18" />
       </If>

       <!--
           ========== Daily quests ==========
       -->


       <!-- Brew for Brewfest
            "Brew for Brewfest" is not a 'normal' quest.  You can pick it up, but it does not go in the toon's
            log, and there is nowhere to turn it in.  Once you have the quest, if you mess up, you cannot get it
            again on that day.  Once you have the quest, you just "keep going" until you no longer have a ram mount.
       -->
       <If Condition="!IsQuestCompleted(29394)" >
           <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
           <CustomBehavior File="FlyTo" QuestId="11318" DestName="Ram racing area" Land="true"
                           X="-5208.785" Y="-494.4889" Z="388.4344" AllowedVariance="7" />
           <CustomBehavior File="WaitTimer" QuestId="11318" WaitTime="3000" VariantTime="5000"
                           GoalText="Loitering for {TimeRemaining}" />

           <PickUp QuestName="Brew For Brewfest" QuestId="29394"
                   GiverName="Neill Ramstein" GiverId="23558"
                   Nav="Fly" X="-5200.16" Y="-491.55" Z="388.48" />

           <CustomBehavior File="SpecificQuests\Holiday\Brewfest-RamRidingQuests" QuestId="29394" >
               <RidingPath>
                   <!-- We micro-manage the path to work around some navigator quirks... -->
                   <Hotspot Name="Torch avoidance" X="-5211.265" Y="-483.2207" Z="389.1165" />
                   <Hotspot Name="Banner to road" X="-5229.856" Y="-478.0888" Z="386.3706" />
                   <Hotspot Name="Riverbed 1" X="-5309.548" Y="-522.5736" Z="388.3328" />
                   <Hotspot Name="Apple Bucket 1" X="-5357.132" Y="-536.7656" Z="391.7714" />
                   <Hotspot Name="Apple Bucket 1 (top of fence)" X="-5359.22" Y="-536.167" Z="392.7879" />
                   <Hotspot Name="Apple Bucket 1 (other side of fence)" X="-5363.143" Y="-535.0867" Z="392.7849" />
                   <Hotspot Name="Beside tree near Apple Bucket2" X="-5460.032" Y="-540.7568" Z="398.394" />
                   <Hotspot Name="Apple Bucket 2" X="-5492.018" Y="-534.7864" Z="398.1151" />
                   <Hotspot Name="Tents by Inn" X="-5547.676" Y="-506.3896" Z="402.0213" />
                   <Hotspot Name="Kegs by Flynn Firebrew" X="-5599.494" Y="-469.1557" Z="398.0992" />
                   <Hotspot Name="Turning around for return" X="-5592.111" Y="-470.8087" Z="398.4724" />

                   <Hotspot Name="Road by tents" X="-5528.97" Y="-486.5582" Z="397.5043" />
                   <Hotspot Name="Apple Bucket 2" X="-5492.018" Y="-534.7864" Z="398.1151" />
                   <Hotspot Name="Beside tree near Apple Bucket2" X="-5460.032" Y="-540.7568" Z="398.394" />
                   <Hotspot Name="Apple Bucket 1 (other side of fence)" X="-5363.143" Y="-535.0867" Z="392.7849" />
                   <Hotspot Name="Apple Bucket 1 (top of fence)" X="-5359.22" Y="-536.167" Z="392.7879" />
                   <Hotspot Name="Apple Bucket 1" X="-5357.132" Y="-536.7656" Z="391.7714" />
                   <Hotspot Name="Riverbed 1" X="-5309.548" Y="-522.5736" Z="388.3328" />
                   <Hotspot Name="Brew drop-off location" X="-5203.017" Y="-496.6536" Z="388.3303" />
               </RidingPath>
           </CustomBehavior>
       </If>

       <!-- Daily Quest: Bark for the XXXXX!
            You can only do one "Bark" quest per day, of the two offered. We pick a random one.
       -->
       <If Condition="new uint[]{11293,11294}.Any(questId => HasQuest(questId) || !IsQuestCompleted(questId))">
           <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                           X="-5157.048" Y="-600.1396" Z="398.1775" AllowedVariance="15" />
           <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                           GoalText="Loitering for {TimeRemaining}" />

           <If Condition="Chance(50.0)" >
               <PickUp QuestName="Bark for the Barleybrews" QuestId="11293"
                       GiverName="Becan Barleybrew" GiverId="23627"
                       Nav="Fly" X="-5184.127" Y="-611.7972" Z="397.1764" />

               <CustomBehavior File="SpecificQuests\Holiday\Brewfest-RamRidingQuests" QuestId="11293" >
                   <RidingPath>
                       <Hotspot Name="Brewfest Food Court entrance" X="-5193.195" Y="-551.8193" Z="397.177" AllowedVariance="5" />
                       <Hotspot Name="Road up to Ironforge" X="-5242.531" Y="-556.0771" Z="399.5165" AllowedVariance="5" />
                       <Hotspot Name="Gates of Ironforge" X="-5030.774" Y="-822.8729" Z="495.1454" AllowedVariance="3" />
                       <Hotspot Name="Ironforge porticullis" X="-4979.556" Y="-883.6346" Z="501.6496" AllowedVariance="3" />
                       <Hotspot Name="Auction House" X="-4909.324" Y="-882.5582" Z="501.6595" AllowedVariance="3" />
                       <Hotspot Name="Bank" X="-4914.549" Y="-950.118" Z="501.4976" AllowedVariance="5" />
                       <Hotspot Name="Military Quarter" X="-4950.494" Y="-1195.39" Z="501.6605" AllowedVariance="5" />
                       <Hotspot Name="Tinker Town" X="-4829.352" Y="-1272.954" Z="501.8688" AllowedVariance="3" />
                       <Hotspot Name="Halls of Exploration" X="-4695.971" Y="-1227.686" Z="501.6597" AllowedVariance="3" />
                       <Hotspot Name="The Forlorn Cavern" X="-4629.39" Y="-1103.125" Z="501.3285" AllowedVariance="3" />
                       <Hotspot Name="The Mystic Ward" X="-4686.149" Y="-974.3801" Z="501.6597" AllowedVariance="3" />
                       <Hotspot Name="Brewfest Food Court" X="-5165.171" Y="-595.3418" Z="398.1745" AllowedVariance="7" />
                   </RidingPath>
               </CustomBehavior>

               <TurnIn QuestName="Bark for the Barleybrews" QuestId="11293"
                       TurnInName="Becan Barleybrew" TurnInId="23627"
                       Nav="Fly" X="-5184.127" Y="-611.7972" Z="397.1764" />

               <Else>
                   <PickUp QuestName="Bark for the Thunderbrews" QuestId="11294"
                           GiverName="Daran Thunderbrew" GiverId="23628"
                           Nav="Fly" X="-5146.556" Y="-633.5544" Z="397.1813" />

                   <CustomBehavior File="SpecificQuests\Holiday\Brewfest-RamRidingQuests" QuestId="11294" >
                       <RidingPath>
                           <Hotspot Name="Brewfest Food Court entrance" X="-5193.195" Y="-551.8193" Z="397.177" AllowedVariance="5" />
                           <Hotspot Name="Road up to Ironforge" X="-5242.531" Y="-556.0771" Z="399.5165" AllowedVariance="5" />
                           <Hotspot Name="Gates of Ironforge" X="-5030.774" Y="-822.8729" Z="495.1454" AllowedVariance="3" />
                           <Hotspot Name="Ironforge porticullis" X="-4979.556" Y="-883.6346" Z="501.6496" AllowedVariance="3" />
                           <Hotspot Name="Auction House" X="-4909.324" Y="-882.5582" Z="501.6595" AllowedVariance="3" />
                           <Hotspot Name="Bank" X="-4914.549" Y="-950.118" Z="501.4976" AllowedVariance="5" />
                           <Hotspot Name="Military Quarter" X="-4950.494" Y="-1195.39" Z="501.6605" AllowedVariance="5" />
                           <Hotspot Name="Tinker Town" X="-4829.352" Y="-1272.954" Z="501.8688" AllowedVariance="3" />
                           <Hotspot Name="Halls of Exploration" X="-4695.971" Y="-1227.686" Z="501.6597" AllowedVariance="3" />
                           <Hotspot Name="The Forlorn Cavern" X="-4629.39" Y="-1103.125" Z="501.3285" AllowedVariance="3" />
                           <Hotspot Name="The Mystic Ward" X="-4686.149" Y="-974.3801" Z="501.6597" AllowedVariance="3" />
                           <Hotspot Name="Brewfest Food Court" X="-5165.171" Y="-595.3418" Z="398.1745" AllowedVariance="7" />
                       </RidingPath>
                   </CustomBehavior>

                   <TurnIn QuestName="Bark for the Thunderbrews" QuestId="11294"
                           TurnInName="Daran Thunderbrew" TurnInId="23628"
                           Nav="Fly" X="-5146.556" Y="-633.5544" Z="397.1813" />
               </Else>
           </If>
       </If>


       <!--
           ========== All we can automate ==========
       -->
       <CustomBehavior File="UserDialog" StopOnContinue="true" ExpiryTime="30"
                       Text="END of the line.  Here is what's left:\n\n* Quest: &quot;This One Time, When I Was Drunk...&quot;\nEvery 30mins the Dark Iron Dwarves will invade Brewfest.\nIf the players are successful in repelling them, there will be a part remaining on the ground that starts a quest.   Take it and simply turn it in.  If you already had this quest in your log, we've turned it on for you.\n\n* DAILY Quest: &quot;Direbrew's Dire Brew&quot; quest\nYou must do Coren Direbrew dungeon by some other means.* When you get 200 Brewfest Prize Tokens, purchase a &quot;Brew of the Month&quot; membership." />

   </QuestOrder>


   <!-- Helpful LUA Snippets...
        /run print(GetAchievementCriteriaInfo(1184,1))
        /run print(GetQuestLogLeaderBoard(1,GetQuestLogIndexByID(11118)))
   -->

</HBProfile>
