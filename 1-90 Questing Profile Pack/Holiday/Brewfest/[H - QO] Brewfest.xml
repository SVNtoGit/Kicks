<?xml version="1.0" encoding="utf-8"?>
<HBProfile xsi:noNamespaceSchemaLocation="../../Schemas/QuestProfileSchema.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <!-- Profile by Chinajade (last updated for 2014 Brewfest)
      PROFILE EXPECTATIONS:
         * When using this profile, be certain to set the HonorBuddy bot to (select only one):
                ( ) Grinding / Mixed
                (*) Questing
                ( ) PvP
         * This profile is appropriate for (check all that apply):
                [ ] Alliance   [ ] Achievement
                [X] Horde      [ ] Farming
                               [ ] Leveling
                               [ ] PvP
                               [X] Questing
                               [ ] Reputation
                               [X] Seasonal
        NOTES:
         * Gets as many Brewfest quests and achievements done as possible given the
            existing HB-shipped behaviors.
         * We use variant timers between actions where appropriate to make it look
            more 'human like'.
         * There are a _lot_ of scenery decorations to get hung up on.  Unfortunately,
            the problem lies in HBcore's navigation, and blackspots will not help this.
            Be careful trying to do this unattended.  Getting hung up on a scenery
            decoration begs for attention in the Brewfest area with a lot of people around.
         * We include coordinates for all the seasonal NPCs as there is a very high chance
            they won't be in the user's Honorbuddy database.
        LICENSE:
            This work is licensed under the
                Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.
            also known as CC-BY-NC-SA.  To view a copy of this license, visit
                http://creativecommons.org/licenses/by-nc-sa/3.0/
            or send a letter to
                Creative Commons
                171 Second Street, Suite 300
                San Francisco, California, 94105, USA.
    -->
   <Name>Brewfest-Horde ($Rev: 3466 $)</Name>

   <MinLevel>60</MinLevel>  <!-- 60, because we must fly in Classic -->
   <MaxLevel>1001</MaxLevel>

   <MinDurability>0.4</MinDurability>
   <MinFreeBagSlots>2</MinFreeBagSlots>

   <MailGrey>false</MailGrey>
   <MailWhite>false</MailWhite>
   <MailGreen>true</MailGreen>
   <MailBlue>true</MailBlue>
   <MailPurple>true</MailPurple>

   <SellGrey>true</SellGrey>
   <SellWhite>true</SellWhite>
   <SellGreen>false</SellGreen>
   <SellBlue>false</SellBlue>
   <SellPurple>false</SellPurple>


   <Blackspots>
   </Blackspots>


   <QuestOrder>
       <If Condition="Me.IsAlliance">
           <CustomBehavior File="LoadProfile" ProfileName="[A - QO] Brewfest" RememberProfile="true" />
       </If>

       <If Condition="!CanFly()" >
           <CustomBehavior File="UserDialog" StopOnContinue="true"
                           Text="Your toon must be able to fly in Kalimdor and Eastern Kingdoms to use this profile." />
       </If>

       <If Condition="Me.FreeNormalBagSlots &lt; 4" >
           <CustomBehavior File="UserDialog" StopOnContinue="true"
                           Text="You must have four free 'normal' bag slots to start this profile.\nPlease make some room in your inventory and restart the profile." />
       </If>

       <!-- WARN USER of HB bugs -->
       <If Condition="true" >      <!-- change to 'Condition="false"' to turn off warning -->
           <CustomBehavior File="UserDialog" AllowBotStop="true"
                           Text="Do NOT AFK this profile!\n\n* You should turn off any plugins or Combat Routine features that use Slowfall abilities. Otherwise, the &quot;Almost Blind Luck&quot; achievement will be acquired after you run out of Slowfall reagents (we keep trying until we get the achievement).\n\n* It goes into areas with many, many people around. You should keep an eye on profile progression.\n\n* Honorbuddy navigation _loves_ to get stuck.\nThe Brewfest scenery decorations provide a wealth of opportunities for this.\n\n* Moving around while drunk causes you to fall a lot (and sometimes die), since Honorbuddy loves to path on the bloody edge of a dropoff. Honorbuddy navigation leaves no room for the error induced by drunkeness.\n\n* Honorbuddy occasionally has problems with Intercontinental travel, which is needed for one of the quests.\n\n* Honorbuddy occasionally gets confused about 'quest state'.\nIt will think something is incomplete when its done.  We've made the profile very stop/start friendly to work around this.\n\n* To turn this warning message off, edit the profile.  Look for a comment with the words &quot;WARN USER&quot; and change the 'true' to 'false'." />
       </If>

       <CustomBehavior File="UserSettings" Preset="NoDistractions" />


       <!-- Quest: Now this is Racing... Almost! -->
       <!-- Need to do this before we get drunk, otherwise it can fail -->
       <If Condition="new uint[]{11409,11412}.Any(questId =&gt; HasQuest(questId) || !IsQuestCompleted(questId))">
           <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
           <CustomBehavior File="FlyTo" DestName="Ram racing area" Land="true"
                           X="1187.951" Y="-4208.585" Z="22.05835" AllowedVariance="4" />
           <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                           GoalText="Loitering for {TimeRemaining}" />

           <PickUp QuestName="Now this is Racing... Almost!" QuestId="11409"
                   GiverName="Ram Master Ray" GiverId="24497"
                   Nav="Fly" X="1179.486" Y="-4216.002" Z="23.81173" />

           <CustomBehavior File="SpecificQuests\Holiday\Brewfest-RamRidingQuests" QuestId="11409" >
               <RidingPath>
                   <!-- We micro-manage the path to work around some navigator quirks... -->
                   <Hotspot Name="Under tent" X="1177.852" Y="-4224.171" Z="23.49659" />
                   <Hotspot Name="Apple Bucket 1" X="1178.927" Y="-4237.304" Z="23.79626" />
                   <Hotspot Name="Between fence and crates" X="1170.744" Y="-4252.798" Z="22.49627" />
                   <Hotspot Name="Between hut and crates" X="1179.905" Y="-4265.688" Z="21.19367" />
                   <Hotspot Name="Archers" X="1196.021" Y="-4293.931" Z="21.2733" />
                   <Hotspot Name="Apple Bucket 2" X="1212.17" Y="-4334.629" Z="21.27485" />
                   <Hotspot Name="Between hut and crates" X="1219.856" Y="-4343.029" Z="21.25587" />
                   <Hotspot Name="Uphill from crates" X="1231.564" Y="-4355.045" Z="23.60842" />
                   <Hotspot Name="Road to Orgrimmar" X="1256.504" Y="-4413.282" Z="24.91549" />
                   <Hotspot Name="Rock formation by roadside" X="1264.987" Y="-4428.599" Z="26.61538" />
                   <Hotspot Name="Between rock formation" X="1289.671" Y="-4461.667" Z="26.30758" />
                   <Hotspot Name="Between rock and fence" X="1296.973" Y="-4478.355" Z="24.91204" />
                   <Hotspot Name="Apple Bucket 3" X="1328.606" Y="-4556.793" Z="26.93323" />
                   <Hotspot Name="Fence end near Apple Bucket 2" X="1336.198" Y="-4573.542" Z="29.53693" />
                   <Hotspot Name="Approach keg toss" X="1343.618" Y="-4618.484" Z="24.23495" />
                   <Hotspot Name="Keg toss" X="1339.996" Y="-4626.079" Z="24.32649" />
                   <Hotspot Name="Depart keg toss" X="1331.517" Y="-4622.231" Z="24.12093" />

                   <Hotspot Name="Fence end near Apple Bucket 2" X="1336.198" Y="-4573.542" Z="29.53693" />
                   <Hotspot Name="Apple Bucket 3" X="1328.606" Y="-4556.793" Z="26.93323" />
                   <Hotspot Name="Between rock and fence" X="1296.973" Y="-4478.355" Z="24.91204" />
                   <Hotspot Name="Between rock formation" X="1289.671" Y="-4461.667" Z="26.30758" />
                   <Hotspot Name="Rock formation by roadside" X="1264.987" Y="-4428.599" Z="26.61538" />
                   <Hotspot Name="Road to Orgrimmar" X="1256.504" Y="-4413.282" Z="24.91549" />
                   <Hotspot Name="Uphill from crates" X="1231.564" Y="-4355.045" Z="23.60842" />
                   <Hotspot Name="Between hut and crates" X="1219.856" Y="-4343.029" Z="21.25587" />
                   <Hotspot Name="Apple Bucket 2" X="1212.17" Y="-4334.629" Z="21.27485" />
                   <Hotspot Name="Between fire and hut 1" X="1211.867" Y="-4320.22" Z="21.19295" />
                   <Hotspot Name="Between fire and hut 2" X="1211.767" Y="-4303.582" Z="21.20129" />
                   <Hotspot Name="Between fire and hut 3" X="1213.341" Y="-4285.396" Z="21.19283" />
                   <Hotspot Name="Between two huts" X="1214.586" Y="-4266.993" Z="21.19283" />
                   <Hotspot Name="Rise up to road" X="1213.058" Y="-4255.963" Z="22.62195" />
                   <Hotspot Name="Top of rise" X="1213.036" Y="-4248.405" Z="23.86883" />
                   <Hotspot Name="Road to return 1" X="1212.612" Y="-4236.993" Z="23.1862" />
                   <Hotspot Name="Road to return 2" X="1194.999" Y="-4219.557" Z="22.38489" />
                   <Hotspot Name="Keg return" X="1181.186" Y="-4218.536" Z="23.92645" />
               </RidingPath>
           </CustomBehavior>

           <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
           <CustomBehavior File="FlyTo" QuestId="11409" DestName="Ram racing area" Land="true"
                           X="1187.951" Y="-4208.585" Z="22.05835" AllowedVariance="4" />
           <CustomBehavior File="WaitTimer" QuestId="11409" WaitTime="3000" VariantTime="5000"
                           GoalText="Loitering for {TimeRemaining}" />

           <TurnIn QuestName="Now this is Racing... Almost!" QuestId="11409"
                   TurnInName="Ram Master Ray" TurnInId="24497"
                   Nav="Fly" X="1179.486" Y="-4216.002" Z="23.81173" />

           <!-- Quest: There and Back again -->
           <PickUp QuestName="There And Back Again" QuestId="11412"
                   GiverName="Ram Master Ray" GiverId="24497"
                   Nav="Fly" X="1179.486" Y="-4216.002" Z="23.81173" />

           <CustomBehavior File="SpecificQuests\Holiday\Brewfest-RamRidingQuests" QuestId="11412" >
               <RidingPath>
                   <!-- We micro-manage the path to work around some navigator quirks... -->
                   <Hotspot Name="Under tent" X="1177.852" Y="-4224.171" Z="23.49659" />
                   <Hotspot Name="Apple Bucket 1" X="1178.927" Y="-4237.304" Z="23.79626" />
                   <Hotspot Name="Between fence and crates" X="1170.744" Y="-4252.798" Z="22.49627" />
                   <Hotspot Name="Between hut and crates" X="1179.905" Y="-4265.688" Z="21.19367" />
                   <Hotspot Name="Archers" X="1196.021" Y="-4293.931" Z="21.2733" />
                   <Hotspot Name="Apple Bucket 2" X="1212.17" Y="-4334.629" Z="21.27485" />
                   <Hotspot Name="Between hut and crates" X="1219.856" Y="-4343.029" Z="21.25587" />
                   <Hotspot Name="Uphill from crates" X="1231.564" Y="-4355.045" Z="23.60842" />
                   <Hotspot Name="Road to Orgrimmar" X="1256.504" Y="-4413.282" Z="24.91549" />
                   <Hotspot Name="Rock formation by roadside" X="1264.987" Y="-4428.599" Z="26.61538" />
                   <Hotspot Name="Between rock formation" X="1289.671" Y="-4461.667" Z="26.30758" />
                   <Hotspot Name="Between rock and fence" X="1296.973" Y="-4478.355" Z="24.91204" />
                   <Hotspot Name="Apple Bucket 3" X="1328.606" Y="-4556.793" Z="26.93323" />
                   <Hotspot Name="Fence end near Apple Bucket 2" X="1336.198" Y="-4573.542" Z="29.53693" />
                   <Hotspot Name="Approach keg toss" X="1343.618" Y="-4618.484" Z="24.23495" />
                   <Hotspot Name="Keg toss" X="1339.996" Y="-4626.079" Z="24.32649" />
                   <Hotspot Name="Depart keg toss" X="1331.517" Y="-4622.231" Z="24.12093" />

                   <Hotspot Name="Fence end near Apple Bucket 2" X="1336.198" Y="-4573.542" Z="29.53693" />
                   <Hotspot Name="Apple Bucket 3" X="1328.606" Y="-4556.793" Z="26.93323" />
                   <Hotspot Name="Between rock and fence" X="1296.973" Y="-4478.355" Z="24.91204" />
                   <Hotspot Name="Between rock formation" X="1289.671" Y="-4461.667" Z="26.30758" />
                   <Hotspot Name="Rock formation by roadside" X="1264.987" Y="-4428.599" Z="26.61538" />
                   <Hotspot Name="Road to Orgrimmar" X="1256.504" Y="-4413.282" Z="24.91549" />
                   <Hotspot Name="Uphill from crates" X="1231.564" Y="-4355.045" Z="23.60842" />
                   <Hotspot Name="Between hut and crates" X="1219.856" Y="-4343.029" Z="21.25587" />
                   <Hotspot Name="Apple Bucket 2" X="1212.17" Y="-4334.629" Z="21.27485" />
                   <Hotspot Name="Between fire and hut 1" X="1211.867" Y="-4320.22" Z="21.19295" />
                   <Hotspot Name="Between fire and hut 2" X="1211.767" Y="-4303.582" Z="21.20129" />
                   <Hotspot Name="Between fire and hut 3" X="1213.341" Y="-4285.396" Z="21.19283" />
                   <Hotspot Name="Between two huts" X="1214.586" Y="-4266.993" Z="21.19283" />
                   <Hotspot Name="Rise up to road" X="1213.058" Y="-4255.963" Z="22.62195" />
                   <Hotspot Name="Top of rise" X="1213.036" Y="-4248.405" Z="23.86883" />
                   <Hotspot Name="Road to return 1" X="1212.612" Y="-4236.993" Z="23.1862" />
                   <Hotspot Name="Road to return 2" X="1194.999" Y="-4219.557" Z="22.38489" />
                   <Hotspot Name="Keg return" X="1181.186" Y="-4218.536" Z="23.92645" />
               </RidingPath>
           </CustomBehavior>

           <TurnIn QuestName="There And Back Again" QuestId="11412"
                   TurnInName="Ram Master Ray" TurnInId="24497"
                   Nav="Fly" X="1179.486" Y="-4216.002" Z="23.81173" />
       </If>

       <!-- A New Supplier of Souvenirs -->
       <If Condition="HasQuest(29396) || !IsQuestCompleted(29396)">
           <PickUp QuestName="A New Supplier of Souvenirs" QuestId="29396"
                   GiverName="Driz Tumblequick" GiverId="24510"
                   Nav="Fly" X="1183.783" Y="-4219.568" Z="24.13986" />

           <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
           <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                           X="1195.047" Y="-4116.562" Z="22.06504" AllowedVariance="15" />
           <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                           GoalText="Loitering for {TimeRemaining}" />

           <TurnIn QuestName="A New Supplier of Souvenirs" QuestId="29396"
                   TurnInName="Blix Fixwidget" TurnInId="24495"
                   Nav="Fly" X="1177.757" Y="-4094.491" Z="18.19143" />
       </If>

       <!--
           ========== Achievements & non-Daily quests ==========
           NB: We wrap each sub-achievement in a <While>, since we can get interrupted
           during the Dark Iron Invasion event
       -->
       <!-- NB: IsAchievementCompleted(id) is broken if another toon on the account has already
            acquired the achievement.  We use this LUA hack to get the correct information.
            The bug has been reported as HB-1219.
            The same problem does not exist for the IsAchievementCompleted(id, index) form.
       -->
       <!-- Achievements: Strange Brew & The Brewfest Diet -->
       <If Condition="Me.ZoneId == 14" >
           <If Condition="!IsAchievementCompleted(1185,7)">
               <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
               <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center near entrance" Land="true"
                               X="1182.818" Y="-4135.731" Z="21.58656" AllowedVariance="7" />
               <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                               GoalText="Loitering for {TimeRemaining}" />

               <!-- Achievement: The Brewfest Diet - The Essential Brewfest Pretzel -->
               <While Condition="!IsAchievementCompleted(1185,7)" >
                   <If Condition="!HasItem(33043)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Uta Roughdough" Nav="Fly" X="1165.229" Y="-4135.487" Z="21.39374" />
                       <CustomBehavior File="InteractWith" MobId="23603" InteractByBuyingItemId="33043" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33043" />
                   <CustomBehavior File="WaitTimer" WaitTime="100" VariantTime="700" />
               </While>
           </If>

           <If Condition="new int[]{4,7,8}.Any(i =&gt; !IsAchievementCompleted(1203,i)) || !IsAchievementCompleted(1185,4)">
               <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
               <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                               X="1195.047" Y="-4116.562" Z="22.06504" AllowedVariance="15" />
               <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                               GoalText="Loitering for {TimeRemaining}" />

               <!-- Achievement: Strange Brew(Drohn's Distillery) - Small Step Brew -->
               <While Condition="!IsAchievementCompleted(1203,8)" >
                   <If Condition="!HasItem(34017)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Drohn's Distillery Apprentice" Nav="Fly" X="1168.625" Y="-4103.194" Z="18.70988" />
                       <CustomBehavior File="InteractWith" MobId="24501" InteractByBuyingItemId="34017" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="34017" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: Strange Brew(Drohn's Distillery) - Long Stride Brew -->
               <While Condition="!IsAchievementCompleted(1203,4)" >
                   <If Condition="!HasItem(34018)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Drohn's Distillery Apprentice" Nav="Fly" X="1168.625" Y="-4103.194" Z="18.70988" />
                       <CustomBehavior File="InteractWith" MobId="24501" InteractByBuyingItemId="34018" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="34018" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: Strange Brew(Drohn's Distillery) - Path of Brew -->
               <While Condition="!IsAchievementCompleted(1203,7)" >
                   <If Condition="!HasItem(34019)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Drohn's Distillery Apprentice" Nav="Fly" X="1168.625" Y="-4103.194" Z="18.70988" />
                       <CustomBehavior File="InteractWith" MobId="24501" InteractByBuyingItemId="34019" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="34019" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: The Brewfest Diet - Spiced Onion Cheese -->
               <While Condition="!IsAchievementCompleted(1185,4)" >
                   <If Condition="GetItemCount(34065) &lt; 1">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Agnes Farwithers" Nav="Fly" X="1187.171" Y="-4092.732" Z="18.64635" />
                       <CustomBehavior File="InteractWith" MobId="23604" InteractByBuyingItemId="34065" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="34065" />
                   <CustomBehavior File="WaitTimer" WaitTime="100" VariantTime="700" />
               </While>
           </If>

           <If Condition="new int[]{1,2,3,5,6,9}.Any(i =&gt; !IsAchievementCompleted(1203,i))" >
               <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
               <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                               X="1195.047" Y="-4116.562" Z="22.06504" AllowedVariance="15" />
               <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                               GoalText="Loitering for {TimeRemaining}" />

               <!-- Achievement: Strange Brew(T'chali's Voodoo Brewery) - Jungle River Water -->
               <While Condition="!IsAchievementCompleted(1203,3)" >
                   <If Condition="!HasItem(34020)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="T'chali's Voodoo Brewery Apprentice" Nav="Fly" X="1206.82" Y="-4094.618" Z="21.04842" />
                       <CustomBehavior File="InteractWith" MobId="23533" InteractByBuyingItemId="34020" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="34020" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: Strange Brew(T'chali's Voodoo Brewery) - Brewdoo Magic -->
               <While Condition="!IsAchievementCompleted(1203,1)" >
                   <If Condition="!HasItem(34021)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="T'chali's Voodoo Brewery Apprentice" Nav="Fly" X="1206.82" Y="-4094.618" Z="21.04842" />
                       <CustomBehavior File="InteractWith" MobId="23533" InteractByBuyingItemId="34021" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="34021" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: Strange Brew(T'chali's Voodoo Brewery) - Stout Shrunken Head -->
               <While Condition="!IsAchievementCompleted(1203,9)" >
                   <If Condition="!HasItem(34022)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="T'chali's Voodoo Brewery Apprentice" Nav="Fly" X="1206.82" Y="-4094.618" Z="21.04842" />
                       <CustomBehavior File="InteractWith" MobId="23533" InteractByBuyingItemId="34022" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="34022" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
               <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                               X="1195.047" Y="-4116.562" Z="22.06504" AllowedVariance="15" />
               <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                               GoalText="Loitering for {TimeRemaining}" />

               <!-- Achievement: Strange Brew(Gordok Brew) - Gordok Grog -->
               <While Condition="!IsAchievementCompleted(1203,2)" >
                   <If Condition="!HasItem(33034)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Gorok Brew Apprentice" Nav="Fly" X="1208.96" Y="-4124.013" Z="23.36991" />
                       <CustomBehavior File="InteractWith" MobId="23511" InteractByBuyingItemId="33034" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33034" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: Strange Brew(Gordok Brew) - Ogre Mead -->
               <While Condition="!IsAchievementCompleted(1203,6)" >
                   <If Condition="!HasItem(33035)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Gorok Brew Apprentice" Nav="Fly" X="1208.96" Y="-4124.013" Z="23.36991" />
                       <CustomBehavior File="InteractWith" MobId="23511" InteractByBuyingItemId="33035" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33035" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: Strange Brew(Gordok Brew) - Mudder's Milk -->
               <While Condition="!IsAchievementCompleted(1203,5)" >
                   <If Condition="!HasItem(33036)" >
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Gorok Brew Apprentice" Nav="Fly" X="1208.96" Y="-4124.013" Z="23.36991" />
                       <CustomBehavior File="InteractWith" MobId="23511" InteractByBuyingItemId="33036" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33036" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>
           </If>

           <If Condition="new int[]{1,2,3,5,6,8}.Any(i =&gt; !IsAchievementCompleted(1185,i))">
               <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
               <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                               X="1195.047" Y="-4116.562" Z="22.06504" AllowedVariance="15" />
               <CustomBehavior File="WaitTimer" WaitTime="3000" VariantTime="5000"
                               GoalText="Loitering for {TimeRemaining}" />

               <!-- Achievement: The Brewfest Diet - Dried Sausage -->
               <While Condition="!IsAchievementCompleted(1185,1)" >
                   <If Condition="!HasItem(34063)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Bron" Nav="Fly" X="1198.011" Y="-4139.63" Z="22.09369" />
                       <CustomBehavior File="InteractWith" MobId="23605" InteractByBuyingItemId="34063"
                                       X="-5133.409" Y="-605.9552" Z="397.4519" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="34063" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: The Brewfest Diet - Pickled Sausage -->
               <While Condition="!IsAchievementCompleted(1185,2)" >
                   <If Condition="!HasItem(33024)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Bron" Nav="Fly" X="1198.011" Y="-4139.63" Z="22.09369" />
                       <CustomBehavior File="InteractWith" MobId="23605" InteractByBuyingItemId="33024" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33024" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: The Brewfest Diet - Savory Sausage -->
               <While Condition="!IsAchievementCompleted(1185,3)" >
                   <If Condition="!HasItem(33023)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Bron" Nav="Fly" X="1198.011" Y="-4139.63" Z="22.09369" />
                       <CustomBehavior File="InteractWith" MobId="23605" InteractByBuyingItemId="33023" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33023" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: The Brewfest Diet - Spicy Smoked Sausage -->
               <While Condition="!IsAchievementCompleted(1185,5)" >
                   <If Condition="!HasItem(33025)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Bron" Nav="Fly" X="1198.011" Y="-4139.63" Z="22.09369" />
                       <CustomBehavior File="InteractWith" MobId="23605" InteractByBuyingItemId="33025" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33025" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: The Brewfest Diet - Succulent Sausage -->
               <While Condition="!IsAchievementCompleted(1185,6)" >
                   <If Condition="!HasItem(34064)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Bron" Nav="Fly" X="1198.011" Y="-4139.63" Z="22.09369" />
                       <CustomBehavior File="InteractWith" MobId="23605" InteractByBuyingItemId="34064" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="34064" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>

               <!-- Achievement: The Brewfest Diet - The Golden Link -->
               <While Condition="!IsAchievementCompleted(1185,8)" >
                   <If Condition="!HasItem(33026)">
                       <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
                       <MoveTo DestName="Bron" Nav="Fly" X="1198.011" Y="-4139.63" Z="22.09369" />
                       <CustomBehavior File="InteractWith" MobId="23605" InteractByBuyingItemId="33026" />
                       <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="1200" />
                   </If>
                   <CustomBehavior File="UseItem" ItemId="33026" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
               </While>
           </If>
       </If>


       <!--
           Pick up whatever quests are not complete
       -->

       <!-- Welcome to Brewfest! -->
       <If Condition="!IsQuestCompleted(11447)" >
           <!-- Non-standard quest... it completes when we pick it up.
                As such, we have to do things manually rather than use the normal <PickUp>
           -->
           <CustomBehavior File="InteractWith" MobId="24711" X="-5184.68" Y="-562.37" Z="397.18" />
           <CustomBehavior File="Misc\RunLua" Lua="SelectGossipAvailableQuest(1)" />
           <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="900" />
           <CustomBehavior File="Misc\RunLua" Lua="GetQuestReward(1)" />
       </If>

       <!-- Get Synthebrew Goggles from Glodrak Huntsniper, and equip them... -->
       <If Condition="!HasItem(46735)">
           <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
           <CustomBehavior File="FlyTo" DestName="Glodrak Huntsniper"
                           Land="true"  X="1159.652" Y="-4142.438" Z="21.35058" AllowedVariance="3" />
           <CustomBehavior File="InteractWith" MobId="24657" InteractByGossipOptions="1,1"
                           TerminateWhen="HasItem(46735)" />
       </If>

       <!-- Quest: Catch the Wild Wolpertinger -->
       <If Condition="HasQuest(11431) || !IsQuestCompleted(11431)" >
           <PickUp QuestName="Catch the Wild Wolpertinger" QuestId="11431"
                   GiverName="Glodrak Huntsniper" GiverId="24657"
                   Nav="Fly" X="1155.069" Y="-4142.635" Z="21.22891" />

           <CustomBehavior File="FlyTo" DestName="Wolpertinger hunting grounds" Land="true"
                           X="1186.987" Y="-4308.195" Z="21.27914" AllowedVariance="5" />

           <CustomBehavior File="UserSettings" AutoEquip="false" />
           <CustomBehavior File="EquipItem" ItemId="46735" />
           <CustomBehavior File="InteractWith" InteractByUsingItemId="32907" MobId="23487" Range="15"
                           MovementBy="NavigatorPreferred" NumOfTimes="100"
                           TerminateWhen="GetItemCount(32906) &gt;= 5"/>
           <CustomBehavior File="UserSettings" AutoEquip="original" />

           <!-- We micro-manage the movment, since Honorbuddy has such trouble with seasonal doodads -->
           <CustomBehavior File="FlyTo" DestName="Glodrak Huntsniper"
                           Land="true"  X="1159.652" Y="-4142.438" Z="21.35058" AllowedVariance="3" />
           <TurnIn QuestName="Catch the Wild Wolpertinger" QuestId="11431"
                   TurnInName="Glodrak Huntsniper" TurnInId="24657"
                   Nav="Fly" X="1155.069" Y="-4142.635" Z="21.22891" />

           <!-- Learn the minipet spell -->
           <CustomBehavior File="UseItem" ItemId="32233" />
       </If>

       <!-- Achievement: Almost Blind Luck -->
       <!-- NB: IsAchievementCompleted(id) is broken if another toon on the account has already
            acquired the achievement.  We use this LUA hack to get the correct information.
            The bug has been reported as HB-1219.
            The same problem does not exist for the IsAchievementCompleted(id, index) form.
       -->
       <If Condition="( Me.ZoneId == 14 ) &amp;&amp; !Lua.GetReturnVal&lt;bool&gt;(&quot;return GetAchievementInfo(1260)&quot;, 12)">
           <CustomBehavior File="Message" UpdateGoalText="true" LogColor="CornflowerBlue"
                           Text="Working the &quot;Almost Blind Luck&quot; achievement." />

           <!-- Interim waypoint to work around FlyTo bug -->
           <CustomBehavior File="FlyTo" DestName="area for &quot;Almost Blind Luck&quot; achievement"
                           X="1172.664" Y="-4424.732" Z="84.05257" />
           <CustomBehavior File="FlyTo" DestName="&quot;Almost Blind Luck&quot; achievement"
                           X="1167.306" Y="-4483.252" Z="88" />
           <CustomBehavior File="UserSettings" AutoEquip="false" />
           <CustomBehavior File="EquipItem" ItemId="46735" />

           <CustomBehavior File="UserDialog" ExpiryTime="30"
                           Text="You must TURN OFF any plugins that use SLOWFALL abilities...\n\nOtherwise, the achievement will be deferred until you run out of appropriate slowfall reagents.\n\n(This message will self-dismiss in a few seconds.)" />
           <!-- Can't used "ForcedDismount" because we don't want automatic descent -->
           <CustomBehavior File="Misc\RunLua" Lua="Dismount()" />
           <!-- In case we're Druid... -->
           <CustomBehavior File="Misc\RunLua" Lua="CancelShapeshiftForm()" />

           <CustomBehavior File="WaitTimer" WaitTime="5000" VariantTime="2000" />
           <If Condition="!Lua.GetReturnVal&lt;bool&gt;(&quot;return GetAchievementInfo(1260)&quot;, 12)">
               <CustomBehavior File="UserDialog" ExpiryTime="30"
                               Text="We were FAILED TO GET the &quot;Almost Blind Luck&quot; ACHIEVEMENT.\n\nThis can happen for numerous reasons.  Your options are:\n* Stop the profile, and do the achievement manually, or\n* Let the profile automatically try again in a few seconds" />
           </If>
           <CustomBehavior File="UserSettings" AutoEquip="original" />
       </If>

       <!-- Quest: Chug and Chuck! -->
       <If Condition="HasQuest(12191) || !IsQuestCompleted(12191)" >
           <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
           <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center near entrance" Land="true"
                           X="1182.818" Y="-4135.731" Z="21.58656" AllowedVariance="7" />

           <PickUp QuestName="Chug and Chuck!" QuestId="12191"
                   GiverName="Bizzle Quicklift" GiverId="27216"
                   Nav="Fly" X="1185.403" Y="-4160.575" Z="21.50515" />

           <CustomBehavior File="ForcedDismount" />

           <While Condition="!IsQuestCompleted(12191)" >
               <MoveTo X="1186.616" Y="-4159.383" Z="21.51129" />

               <CustomBehavior File="InteractWith" MobId="186189" NonCompeteDistance="0"
                               TerminateWhen="HasItem(33096)" />
               <CustomBehavior File="WaitTimer" WaitTime="300" VariantTime="900" />

               <CustomBehavior File="InteractWith" InteractByUsingItemId="33096" MobId="24108" Range="20"
                               NonCompeteDistance="0" />
           </While>

           <TurnIn QuestName="Chug and Chuck!" QuestId="12191"
                   TurnInName="Bizzle Quicklift" TurnInId="27216"
                   Nav="Fly" X="1185.403" Y="-4160.575" Z="21.50515" />
       </If>


       <!-- Quest: This One Time, When I Was Drunk... -->
       <!-- We can't pick this one up, because it requires a large team effort
            to do.  But, if the user has done this successfully, go turn it in
            for them.
       -->
       <If Condition="HasQuest(12192)" >
           <TurnIn QuestName="This One Time, When I Was Drunk..." QuestId="12192"
                   TurnInName="Bizzle Quicklift" TurnInId="27216"
                   Nav="Fly" X="1185.403" Y="-4160.575" Z="21.50509" />
       </If>


       <!-- Achievement: Have Keg, Will Travel -->
       <!-- NB: IsAchievementCompleted(id) is broken if another toon on the account has already
            acquired the achievement.  We use this LUA hack to get the correct information.
            The bug has been reported as HB-1219.
            The same problem does not exist for the IsAchievementCompleted(id, index) form.
       -->
       <If Condition="!Lua.GetReturnVal&lt;bool&gt;(&quot;return GetAchievementInfo(303)&quot;, 12)" >
           <CustomBehavior File="Message" UpdateGoalText="true" LogColor="CornflowerBlue"
                           Text="Working the &quot;Have Keg, Will Travel&quot; achievement." />


           <If Condition="GetItemCount(39476) &gt; 0" >    <!-- Fresh Goblin Brewfest Hops -->
               <CustomBehavior File="ForcedDismount" />
               <CustomBehavior File="ForcedMount" MountType="Ground" />
               <CustomBehavior File="UseItem" ItemId="39476" />
               <ElseIf Condition="HasItem(39477)" >    <!-- Fresh Dwarven Brewfest Hops -->
                   <CustomBehavior File="ForcedDismount" />
                   <CustomBehavior File="ForcedMount" MountType="Ground" />
                   <CustomBehavior File="UseItem" ItemId="39477" />
               </ElseIf>
               <ElseIf Condition="HasItem(37750)" > <!-- Fresh Brewfest Hops -->
                   <CustomBehavior File="ForcedDismount" />
                   <CustomBehavior File="ForcedMount" MountType="Ground" />
                   <CustomBehavior File="UseItem" ItemId="37750" />
               </ElseIf>
               <ElseIf Condition="HasItem(37816)" > <!-- Preserved Brewfest Hops -->
                   <CustomBehavior File="ForcedDismount" />
                   <CustomBehavior File="ForcedMount" MountType="Ground" />
                   <CustomBehavior File="UseItem" ItemId="37816" />
               </ElseIf>
               <ElseIf Condition="GetItemCount(37829) &gt;= 2"> <!-- Brewfest Prize Tokens -->
                   <CustomBehavior File="FlyTo" DestName="Blix Fixwidget" Land="true"
                                   X="1177.757" Y="-4094.491" Z="18.19143" />
                   <!-- Due to an HBcore bug, we have to buy the hard way...
                        This may happen because the questgiver has gossip dialogs also.
                   -->
                   <CustomBehavior File="InteractWith" MobId="24495" InteractByGossipOptions="4"
                                   InteractByBuyingItemId="37750" KeepTargetSelected="true" />
                   <CustomBehavior File="Misc\RunLua" Lua="CloseMerchant()" />
                   <CustomBehavior File="ForcedMount" MountType="Ground" />
                   <CustomBehavior File="WaitTimer" WaitTime="1000" VariantTime="700" />
                   <CustomBehavior File="UseItem" ItemId="37750" />
               </ElseIf>
               <Else>
                   <CustomBehavior File="UserDialog"
                                   Text="You do not have the &quot;Have Keg, Will Travel&quot; achievement.\n\nYou also don't have enough Brewfest Prize Tokens to claim the achievement.  For now we'll have to skip it, and we'll try again when you restart the profile.  Hopefully, by then you will have additional Brewfest Prize Tokens from doing Brewfest dailies." />
               </Else>
           </If>
       </If>


       <!-- Quest: Pink Elekks on Parade -->
       <If Condition="!IsQuestCompleted(11120)" >
           <If Condition="!HasQuest(11120)" >
               <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
               <CustomBehavior File="FlyTo" DestName="Glodrak Huntsniper"
                               Land="true"  X="1159.652" Y="-4142.438" Z="21.35058" />

               <PickUp QuestName="Pink Elekks on Parade" QuestId="11120"
                       GiverName="Glodrak Huntsniper" GiverId="24657"
                       Nav="Fly" X="1155.069" Y="-4142.635" Z="21.22891" />
           </If>

           <!-- If Mulgore Elekks are needed... -->
           <If Condition="!IsObjectiveComplete(2,11120)">
               <CustomBehavior File="Message" UpdateGoalText="true" LogColor="CornflowerBlue"
                               Text="Working the Mulgore Elekks." />

               <If Condition="Me.MapId == 1" >
                   <CustomBehavior File="FlyTo" DestName="Mulgore Elekks" Land="true">
                       <DestinationChoices>
                           <Hotspot Name="Bottom of lift" X="-1326.296" Y="196.2812" Z="59.65387" AllowedVariance="7" />
                           <Hotspot Name="Below bottom of lift" X="-1370.043" Y="229.5276" Z="7.261693" AllowedVariance="10" />
                           <Hotspot Name="South road down from lift" X="-1359.953" Y="158.0247" Z="39.34394" AllowedVariance="7" />
                           <Hotspot Name="North road down from lift" X="-1240.97" Y="223.3204" Z="47.90081" AllowedVariance="7" />
                       </DestinationChoices>
                   </CustomBehavior>

                   <Else>
                       <CustomBehavior File="UserDialog" StopOnContinue="true"
                                       Text="Whoops, you're not where we left you.\n\nPlease move to Kalimdor and start the profile again." />
                   </Else>
               </If>

               <CustomBehavior File="UserSettings" AutoEquip="false" />
               <CustomBehavior File="EquipItem" ItemId="46735" />
               <CustomBehavior File="InteractWith" QuestId="11120" QuestObjectiveIndex="2"
                               NumOfTimes="100" InteractByUsingItemId="32960" Range="15"
                               MobId="23528" MobId2="23507" MobId3="23527"
                               MobId4="23529" MobId5="23530" MobId6="23531"
                               PreInteractMountStrategy="Dismount" >
                   <Blackspots>
                       <!-- Work around Brewfest seasonal doodads as best we can... -->
                       <Blackspot X="-1269.515" Y="195.5947" Z="59.43379" Radius="7" />
                   </Blackspots>
               </CustomBehavior>
               <CustomBehavior File="UserSettings" AutoEquip="original" />
           </If>

           <!-- If Tirisfal Elekks are needed... -->
           <If Condition="!IsObjectiveComplete(3,11120)">
               <CustomBehavior File="Message" UpdateGoalText="true" LogColor="CornflowerBlue"
                               Text="Working the Tirisfal Forest Elekks." />

               <!-- Move to Tirisfal via Origrimmar blimp, if in Kalimdor -->
               <If Condition="Me.MapId == 1" >
                   <CustomBehavior File="FlyTo" DestName="Orgrimmar blimp to Tirisfal"
                                   Land="true" X="1847.964" Y="-4398.508" Z="135.1722" AllowedVariance="3" />
                   <CustomBehavior File="UseTransport"
                                   TransportId="164871"
                                   WaitAtX="1840.078" WaitAtY="-4390.568" WaitAtZ="135.2318"
                                   TransportStartX="1833.509" TransportStartY="-4391.543" TransportStartZ="152.7679"
                                   StandOnX="1834.989" StandOnY="-4386.013" StandOnZ="135.0148"
                                   TransportEndX="2062.376" TransportEndY="292.998" TransportEndZ="114.973"
                                   GetOffX="2065.663" GetOffY="289.0341" GetOffZ="97.02564" />
               </If>


               <If Condition="Me.MapId != 0">
                   <CustomBehavior File="UserDialog" StopOnContinue="true"
                                   Text="Whoops, you're not where we left you.\n\nPlease move to Eastern Kindgoms and start the profile again." />
               </If>

               <CustomBehavior File="FlyTo" DestName="Tirisfal Brewfest"
                               Land="true" X="1824.071" Y="244.4118" Z="60.18181" ArrivalTolerance="10" />

               <CustomBehavior File="UserSettings" AutoEquip="false" />
               <CustomBehavior File="EquipItem" ItemId="46735" />
               <CustomBehavior File="InteractWith" QuestId="11120" QuestObjectiveIndex="3"
                               NumOfTimes="100" InteractByUsingItemId="32960" Range="15"
                               MobId="23528" MobId2="23507" MobId3="23527"
                               MobId4="23529" MobId5="23530" MobId6="23531"
                               PreInteractMountStrategy="Dismount" />
               <CustomBehavior File="UserSettings" AutoEquip="original" />
           </If>

           <!-- If Eversong Elekks are needed... -->
           <If Condition="!IsObjectiveComplete(1,11120)">

               <!-- If in Ruins of Lordaeron, use Silvermoon Orb of Translocation... -->
               <!-- NB: Some WoWservers are buggy, and use of the Orb frequently fails... -->
               <While Condition="Me.ZoneId == 1497">
                   <CustomBehavior File="InteractWith" MobId="184503"
                                   X="1805.848" Y="348.8648" Z="70.87273"
                                   WaitTime="7000" />
               </While>

               <!-- If in Silvermoon City, move outside... -->
               <If Condition="!( ( Me.ZoneId == 3487 ) || ( Me.ZoneId == 3430 ) )" >
                   <CustomBehavior File="UserDialog" StopOnContinue="true"
                                   Text="Whoops, you're not where we left you.\n\nPlease move to Silvermoon City and start the profile again." />
               </If>

               <MoveTo DestName="Eversong Brewfest" X="9336.474" Y="-7276.931" Z="13.57835" />
               <CustomBehavior File="ForcedDismount" />

               <CustomBehavior File="UserSettings" AutoEquip="false" />
               <CustomBehavior File="EquipItem" ItemId="46735" />
               <CustomBehavior File="InteractWith" QuestId="11120" QuestObjectiveIndex="1"
                               NumOfTimes="100" InteractByUsingItemId="32960" Range="15"
                               MobId="23528" MobId2="23507" MobId3="23527"
                               MobId4="23529" MobId5="23530" MobId6="23531"
                               PreInteractMountStrategy="Dismount" >
                   <Blackspots>
                       <!-- Work around Brewfest seasonal doodads as best we can... -->
                       <Blackspot Name="Elephant behind wagon with barrels"
                                  X="9292.658" Y="-7270.867" Z="16.67097" Radius="7" />
                   </Blackspots>
               </CustomBehavior>

               <CustomBehavior File="UserSettings" AutoEquip="original" />
           </If>
       </If>

       <If Condition="HasQuest(11120)">
           <CustomBehavior File="Message" UpdateGoalText="true" LogColor="CornflowerBlue"
                           Text="Turning in &quot;Pink Elekks on Parade&quot; quest." />

           <!-- If in Eversong Woods, move to Silvermoon City... -->
           <If Condition="Me.ZoneId == 3430" >
               <MoveTo DestName="Silvermoon City" X="10042.92" Y="-7001.271" Z="61.98705" />
           </If>

           <!-- If in Silvermoon City, use Orb of Translocation... -->
           <!-- NB: Some WoWservers are buggy, and use of the Orb frequently fails... -->
           <While Condition="Me.ZoneId == 3487" >
               <!-- Silvermoon City -->
               <MoveTo DestName="Orb of Translocation" X="10042.92" Y="-7001.271" Z="61.98705" />
               <CustomBehavior File="InteractWith" MobId="184502" X="10034.72" Y="-7000.292" Z="61.57618" />
               <CustomBehavior File="WaitTimer" WaitTime="7000" />
           </While>

           <!-- If in Undercity, move to Tirisfall... -->
           <If Condition="Me.ZoneId == 1497" >
               <MoveTo Nav="Fly" DestName="Tirisfall blimp tower" X="2067.232" Y="286.1159" Z="97.03087" />
           </If>

           <!-- If in Tirisfal Glades, use blimp to move to Kalimdor -->
           <If Condition="Me.ZoneId == 85" >
               <CustomBehavior File="UseTransport" TransportId="164871"
                               WaitAtX="2066.993" WaitAtY="288.6118" WaitAtZ="97.03165"
                               TransportStartX="2062.376" TransportStartY="292.998" TransportStartZ="114.973"
                               StandOnX="2067.979" StandOnY="295.2747" StandOnZ="97.23677"
                               TransportEndX="1833.509" TransportEndY="-4391.543" TransportEndZ="152.7679"
                               GetOffX="1840.225" GetOffY="-4390.912" GetOffZ="135.2337" />
           </If>

            <!-- If in Kalimdor, move to final destination -->
           <If Condition="Me.MapId == 1" >
               <CustomBehavior File="FlyTo" DestName="Glodrak Huntsniper"
                               Land="true" X="1155.069" Y="-4142.635" Z="21.22891" />
           <Else>
               <CustomBehavior File="UserDialog" StopOnContinue="true"
                               Text="Whoops, you're not where we left you.\n\nPlease move to Kalimdor and start the profile again." />
               </Else>
           </If>

           <TurnIn QuestName="Pink Elekks on Parade" QuestId="11120"
                   TurnInName="Glodrak Huntsniper" TurnInId="24657"
                   Nav="Fly" X="1155.069" Y="-4142.635" Z="21.22891" />
       </If>


       <!--
           ========== Daily quests ==========
       -->


       <!-- Brew for Brewfest
            "Brew for Brewfest" is not a 'normal' quest.  You can pick it up, but it does not go in the toon's
            log, and there is nowhere to turn it in.  Once you have the quest, if you mess up, you cannot get it
            again on that day.  Once you have the quest, you just "keep going" until you no longer have a ram mount.
       -->
       <If Condition="!IsQuestCompleted(29393)">
           <!-- Micro-manage approach to NPC to prevent getting stuck on Brewfest seasonal doodads -->
           <CustomBehavior File="FlyTo" DestName="Ram racing area" Land="true"
                           X="1187.951" Y="-4208.585" Z="22.05835" AllowedVariance="4" />

           <PickUp QuestName="Brew For Brewfest" QuestId="29393"
                   GiverName="Ram Master Ray" GiverId="24497"
                   Nav="Fly" X="1179.486" Y="-4216.002" Z="23.81152" />

           <CustomBehavior File="SpecificQuests\Holiday\Brewfest-RamRidingQuests" QuestId="29393" >
               <RidingPath>
                   <!-- We micro-manage the path to work around some navigator quirks... -->
                   <Hotspot Name="Under tent" X="1177.852" Y="-4224.171" Z="23.49659" />
                   <Hotspot Name="Apple Bucket 1" X="1178.927" Y="-4237.304" Z="23.79626" />
                   <Hotspot Name="Between fence and crates" X="1170.744" Y="-4252.798" Z="22.49627" />
                   <Hotspot Name="Between hut and crates" X="1179.905" Y="-4265.688" Z="21.19367" />
                   <Hotspot Name="Archers" X="1196.021" Y="-4293.931" Z="21.2733" />
                   <Hotspot Name="Apple Bucket 2" X="1212.17" Y="-4334.629" Z="21.27485" />
                   <Hotspot Name="Between hut and crates" X="1219.856" Y="-4343.029" Z="21.25587" />
                   <Hotspot Name="Uphill from crates" X="1231.564" Y="-4355.045" Z="23.60842" />
                   <Hotspot Name="Road to Orgrimmar" X="1256.504" Y="-4413.282" Z="24.91549" />
                   <Hotspot Name="Rock formation by roadside" X="1264.987" Y="-4428.599" Z="26.61538" />
                   <Hotspot Name="Between rock formation" X="1289.671" Y="-4461.667" Z="26.30758" />
                   <Hotspot Name="Between rock and fence" X="1296.973" Y="-4478.355" Z="24.91204" />
                   <Hotspot Name="Apple Bucket 3" X="1328.606" Y="-4556.793" Z="26.93323" />
                   <Hotspot Name="Fence end near Apple Bucket 2" X="1336.198" Y="-4573.542" Z="29.53693" />
                   <Hotspot Name="Approach keg toss" X="1343.618" Y="-4618.484" Z="24.23495" />
                   <Hotspot Name="Keg toss" X="1339.996" Y="-4626.079" Z="24.32649" />
                   <Hotspot Name="Depart keg toss" X="1331.517" Y="-4622.231" Z="24.12093" />

                   <Hotspot Name="Fence end near Apple Bucket 2" X="1336.198" Y="-4573.542" Z="29.53693" />
                   <Hotspot Name="Apple Bucket 3" X="1328.606" Y="-4556.793" Z="26.93323" />
                   <Hotspot Name="Between rock and fence" X="1296.973" Y="-4478.355" Z="24.91204" />
                   <Hotspot Name="Between rock formation" X="1289.671" Y="-4461.667" Z="26.30758" />
                   <Hotspot Name="Rock formation by roadside" X="1264.987" Y="-4428.599" Z="26.61538" />
                   <Hotspot Name="Road to Orgrimmar" X="1256.504" Y="-4413.282" Z="24.91549" />
                   <Hotspot Name="Uphill from crates" X="1231.564" Y="-4355.045" Z="23.60842" />
                   <Hotspot Name="Between hut and crates" X="1219.856" Y="-4343.029" Z="21.25587" />
                   <Hotspot Name="Apple Bucket 2" X="1212.17" Y="-4334.629" Z="21.27485" />
                   <Hotspot Name="Between fire and hut 1" X="1211.867" Y="-4320.22" Z="21.19295" />
                   <Hotspot Name="Between fire and hut 2" X="1211.767" Y="-4303.582" Z="21.20129" />
                   <Hotspot Name="Between fire and hut 3" X="1213.341" Y="-4285.396" Z="21.19283" />
                   <Hotspot Name="Between two huts" X="1214.586" Y="-4266.993" Z="21.19283" />
                   <Hotspot Name="Rise up to road" X="1213.058" Y="-4255.963" Z="22.62195" />
                   <Hotspot Name="Top of rise" X="1213.036" Y="-4248.405" Z="23.86883" />
                   <Hotspot Name="Road to return 1" X="1212.612" Y="-4236.993" Z="23.1862" />
                   <Hotspot Name="Road to return 2" X="1194.999" Y="-4219.557" Z="22.38489" />
                   <Hotspot Name="Keg return" X="1181.186" Y="-4218.536" Z="23.92645" />
               </RidingPath>
           </CustomBehavior>
       </If>

       <!-- Daily Quest: Bark for the XXXXX!
            You can only do one "Bark" quest per day, of the two offered. We pick a random one.
       -->
       <If Condition="new uint[]{11407,11408}.Any(questId => HasQuest(questId) || !IsQuestCompleted(questId))">
           <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                           X="1195.047" Y="-4116.562" Z="22.06504" AllowedVariance="15" />

           <If Condition="Chance(50.0)" >
               <PickUp QuestName="Bark for Drohn's Distillery" QuestId="11407"
                       GiverName="Cort Gorestein" GiverId="24498"
                       Nav="Fly" X="1167.21" Y="-4107.191" Z="19.2142" />

               <CustomBehavior File="SpecificQuests\Holiday\Brewfest-RamRidingQuests" QuestId="11407" >
                   <RidingPath>
                       <Hotspot Name="Brewfest Food Court center" X="1182.852" Y="-4128.978" Z="21.45183" />
                       <Hotspot Name="Brewfest Food Court entrance" X="1163.938" Y="-4174.017" Z="21.36556" />
                       <Hotspot Name="Orgrimmar entrance" X="1363.578" Y="-4350.05" Z="27.34023" />
                       <Hotspot Name="Valley of Strength" X="1572.45" Y="-4403.233" Z="15.8501" />
                       <Hotspot Name="Valley of Honor 1" X="1935.573" Y="-4689.093" Z="35.23221" />
                       <Hotspot Name="Valley of Honor 2" X="1936.011" Y="-4679.372" Z="34.12093" />
                       <Hotspot Name="Valley of Wisdom" X="1910.571" Y="-4271.396" Z="28.01602" />
                       <Hotspot Name="Entrance to tunnel to Valley of Spirits" X="1739.596" Y="-4192.717" Z="53.82623" />
                       <Hotspot Name="Center of tunnel to Valley of Spirits" X="1736.977" Y="-4164.93" Z="56.56609" />
                       <Hotspot Name="Exit of tunnel to Valley of Spirits" X="1735.776" Y="-4143.376" Z="55.69423" />
                       <Hotspot Name="Valley of Spirits 1" X="1728.98" Y="-4106.082" Z="50.34822" />
                       <Hotspot Name="Valley of Spirits 2" X="1606.404" Y="-4167.273" Z="49.97702" />
                       <Hotspot Name="Orgrimmar entrance" X="1363.578" Y="-4350.05" Z="27.34023" />
                       <Hotspot Name="Brewfest Food Court entrance" X="1163.938" Y="-4174.017" Z="21.36556" />
                       <Hotspot Name="Brewfest Food Court center" X="1182.852" Y="-4128.978" Z="21.45183" />
                   </RidingPath>
               </CustomBehavior>

               <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                               X="1195.047" Y="-4116.562" Z="22.06504" AllowedVariance="15" />

               <TurnIn QuestName="Bark for Drohn's Distillery" QuestId="11407"
                       TurnInName="Cort Gorestein" TurnInId="24498"
                       Nav="Fly" X="1167.21" Y="-4107.191" Z="19.2142" />

               <Else>
                   <PickUp QuestName="Bark for T'chali's Voodoo Brewery" QuestId="11408"
                           GiverName="Ja'ron" GiverId="24499"
                           Nav="Fly" X="1206.252" Y="-4088.099" Z="20.75311" />

                   <CustomBehavior File="SpecificQuests\Holiday\Brewfest-RamRidingQuests" QuestId="11408" >
                       <RidingPath>
                           <Hotspot Name="Brewfest Food Court center" X="1182.852" Y="-4128.978" Z="21.45183" />
                           <Hotspot Name="Brewfest Food Court entrance" X="1163.938" Y="-4174.017" Z="21.36556" />
                           <Hotspot Name="Orgrimmar entrance" X="1363.578" Y="-4350.05" Z="27.34023" />
                           <Hotspot Name="Valley of Strength" X="1572.45" Y="-4403.233" Z="15.8501" />
                           <Hotspot Name="Valley of Honor 1" X="1935.573" Y="-4689.093" Z="35.23221" />
                           <Hotspot Name="Valley of Honor 2" X="1936.011" Y="-4679.372" Z="34.12093" />
                           <Hotspot Name="Valley of Wisdom" X="1910.571" Y="-4271.396" Z="28.01602" />
                           <Hotspot Name="Entrance to tunnel to Valley of Spirits" X="1739.596" Y="-4192.717" Z="53.82623" />
                           <Hotspot Name="Center of tunnel to Valley of Spirits" X="1736.977" Y="-4164.93" Z="56.56609" />
                           <Hotspot Name="Exit of tunnel to Valley of Spirits" X="1735.776" Y="-4143.376" Z="55.69423" />
                           <Hotspot Name="Valley of Spirits 1" X="1728.98" Y="-4106.082" Z="50.34822" />
                           <Hotspot Name="Valley of Spirits 2" X="1606.404" Y="-4167.273" Z="49.97702" />
                           <Hotspot Name="Orgrimmar entrance" X="1363.578" Y="-4350.05" Z="27.34023" />
                           <Hotspot Name="Brewfest Food Court entrance" X="1163.938" Y="-4174.017" Z="21.36556" />
                           <Hotspot Name="Brewfest Food Court center" X="1182.852" Y="-4128.978" Z="21.45183" />
                       </RidingPath>
                   </CustomBehavior>

                   <CustomBehavior File="FlyTo" DestName="Brewfest Food Court center" Land="true"
                                   X="1195.047" Y="-4116.562" Z="22.06504" AllowedVariance="15" />

                   <TurnIn QuestName="Bark for T'chali's Voodoo Brewery" QuestId="11408"
                           TurnInName="Ja'ron" TurnInId="24499"
                           Nav="Fly" X="1206.252" Y="-4088.099" Z="20.75311" />

               </Else>
           </If>
       </If>


       <!--
           ========== All we can automate ==========
       -->
       <CustomBehavior File="UserDialog" StopOnContinue="true" ExpiryTime="30"
                       Text="END of the line.  Here is what's left:\n\n* Quest: &quot;This One Time, When I Was Drunk...&quot;\nEvery 30mins the Dark Iron Dwarves will invade Brewfest.\nIf the players are successful in repelling them, there will be a part remaining on the ground that starts a quest.   Take it and simply turn it in.  If you already had this quest in your log, we've turned it on for you.\n\n* DAILY Quest: &quot;Direbrew's Dire Brew&quot; quest\nYou must do Coren Direbrew dungeon by some other means.* When you get 200 Brewfest Prize Tokens, purchase a &quot;Brew of the Month&quot; membership." />

   </QuestOrder>


   <!-- Helpful LUA Snippets...
        /run print(GetAchievementCriteriaInfo(1184,1))
        /run print(GetQuestLogLeaderBoard(1,GetQuestLogIndexByID(11120)))
   -->

</HBProfile>
